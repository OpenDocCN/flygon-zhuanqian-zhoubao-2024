<h1>æˆ‘ç”¨ Cursor èŠ±äº†ä¸åˆ°5åˆ†é’Ÿæ‰¾åˆ°äº†å¤´åƒ</h1>
<blockquote>æ¥æºï¼š<a href="https://ktnwm6ohjn.feishu.cn/docx/NqmkdxL5Zo1Ih8xGBKfcIpLAnOh">https://ktnwm6ohjn.feishu.cn/docx/NqmkdxL5Zo1Ih8xGBKfcIpLAnOh</a></blockquote>
<p>https://t.zsxq.com/R3nuz</p>
<p><img src="img/4cc5b80b4b1e952ed54703b380463a76.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UDR4brkgUo9PCXxKClNcgZpgnOb/"/></p>
<p>é±¼ä¸¸å‘äº†ä¸€ä¸ªæ‰¾å¤´åƒæ´»åŠ¨ï¼Œ5000äººç”Ÿè´¢å¢™æ‰¾åˆ°è‡ªå·±çš„å¤´åƒï¼ŒçœŸæœ‰æ„æ€ï¼Œæ‰¾äº†å¿«15åˆ†é’Ÿçœ¼éƒ½çœ‹èŠ±äº†ï¼Œä»æ˜¯æ²¡æ‰¾åˆ°åœˆå‹çš„å¤´åƒğŸ˜‚ï¼ˆå¯¹ï¼Œä¸æ˜¯æˆ‘è‡ªå·±çš„ï¼Œå› ä¸ºæˆ‘çš„è¢«æ‰¾åˆ°äº†ï¼Œè€Œæˆ‘æ‰¾ä¸åˆ°å¥¹çš„ï¼‰</p>

<p>@Rice</p>
<p><img src="img/b9ae879ed970ead40888aa386e16aef3.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CA6CbskRYoO03vxKPn7cOuUInex/"/></p>

<p>æ—¢ç„¶å¦‚æ­¤ï¼Œè¿™ç§äº‹æƒ…ä¸äº¤ç»™ç¨‹åºå¹²ï¼Ÿç«‹é©¬å°±ä¸Šï¼ï¼ï¼</p>
<p>ç­‰ç­‰ï¼Ÿå¬è¯´æœ‰äººä¸ä¼šç”¨ Cursor? æŒ‡è·¯@é˜¿ç´«çš„å¸–å­ https://scys.com/articleDetail/xq_topic/1525488422112812</p>
<h3>1 ç¡®è®¤è‡ªå·±çš„éœ€æ±‚</h3>
<p>è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼šåœ¨å¤§å›¾ä¸­æ‰¾åˆ°è‡ªå·±çš„å¤´åƒï¼Ÿ</p>
<p>è€ƒè™‘åˆ°æ‰¾å›¾æ¶‰åŠåˆ°ç®—æ³•ï¼Œç®—æ³•åŸºæœ¬éƒ½æ˜¯pythonå®ç°ï¼Œæ‰€ä»¥æˆ‘ä¸€å¼€å§‹å°±ç”¨äº†pythonå»å°è¯•ï¼Œå¦‚æœæ¢å…¶ä»–çš„ä»£ç å¯èƒ½å®ç°ä¼šæœ‰äº›å›°éš¾ã€‚</p>
<p>å¸®æˆ‘ç”¨pythonå†™ä¸ªå›¾åƒåŒ¹é…çš„ä»£ç ï¼Œåœ¨ä¸€ä¸ª 14173 x 3701 çš„è®¸å¤šå¤´åƒçš„å›¾ç‰‡ä¸Šï¼ŒåŒ¹é…åˆ° å¤§çº¦æ˜¯ 64x64 ä¸€å¼ å¤´åƒã€‚æˆ‘ä¼šæä¾›ä¸€å¼ è‡ªå·±çš„ä¸åŒåˆ†è¾¨ç‡çš„å¤´åƒå›¾ç‰‡ï¼Œç„¶åç”¨è¿™å¼ å›¾ç‰‡å– å¤§å›¾é‡Œé¢æŸ¥æ‰¾ï¼Œæ‰¾åˆ°å°±è¿”å›å¤´åƒèŒƒå›´çš„æˆªå›¾ã€‚èƒ½å®ç°ä¹ˆï¼Ÿ</p>

<p>æŠŠå¤§å›¾åƒä¸‹è½½ä¸‹æ¥ï¼Œå‘ç°å›¾åƒå¤§å°ä¸º 14173 x 3701 ï¼Œç„¶åä¸ Cursor å¯¹è¯</p>
<p><img src="img/2295d5e8c8271cd2c9f800e10b048adc.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JUUCbt3ekomN02xBO6hcRx2nnEd/"/></p>
<p><img src="img/258e6b2e811c1b5cad62281fecaa600b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LrN7bMSErolLKzxNsWacDOxHnme/"/></p>

<h3>2 æ·»åŠ å‘½ä»¤è¡Œè°ƒç”¨</h3>
<p>ä¸€ä¸‹å­å°±å®ç°äº†ï¼ï¼ï¼ åªç”¨ç”¨èµ·æ¥ä¸æ–¹ä¾¿ã€‚æˆ‘å‘Šè¯‰ Cursorï¼Œç”¨å‘½ä»¤è¡Œè°ƒç”¨ã€‚</p>
<p><img src="img/b4258ab3c32865e29b51d237ff541740.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LEfrbgNyho2evMxMbROcBkoGnXe/"/></p>
<p><img src="img/48a3760211182b4882df123a59ffa8a2.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/OHarbd0NnoXFMKxew8jczvgNnfd/"/></p>
<h3>3 æµ‹è¯•æ•ˆæœå¹¶æ”¹è¿›</h3>
<p>æµ‹è¯•å‘ç°å›¾åƒæ˜¯æ‰¾åˆ°äº†ï¼Œä½†æ˜¯ç»™å‡ºçš„å›¾ç‰‡åªæœ‰ä¸€ä¸ªå›¾æ ‡å¤§å°</p>
<p><img src="img/373974c935d9c596259942386fac9bfb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XlmEbLjEQoY4YgxrGkrcCRlDnKf/"/></p>
<p><img src="img/736033defe03de6567eacb102e8c890f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/U1j9b1hvyoPMxjx6aumcWHPenme/"/></p>
<p>è€Œä¸”å‘ç°ä¼šåŒ¹é…åˆ°8ä¸ªç»“æœï¼Œç»§ç»­ä¼˜åŒ–</p>
<p><img src="img/1a3362072d7515047baf98d24c348b8a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Xmb2bVCmyoPZ3qxjYu1c5vUunje/"/></p>
<p><img src="img/1eb6a06896f4e541e065b81f85db312e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/SQMgbH4E8o5aGKxCCkzcZ18fnae/"/></p>

<h3>4 æ”¾å¤§å›¾ç‰‡</h3>
<p>æœ€ååœ¨è°ƒæ•´ä¸‹ç»†èŠ‚ï¼š</p>
<p><img src="img/42de4201ee939689aa882482fb3189bc.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/FoIFbgW53o1bz5x6lnwcWLmnnYc/"/></p>
<p><img src="img/39c2ca067ac9b6b93f2fdaa275c0a77b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/BsopbNltNo92R8xsXkMcpkVhnic/"/></p>

<h3>5 ç»“æœå›¾</h3>
<p>å‡ºæ¥çš„ç»“æœå›¾</p>
<p><img src="img/66f46e9dc6f13de46d80ec0346cddaca.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MRGhbIGUUoB2kCxk8vlcmsOxnWh/"/></p>
<p><img src="img/d3f54a95acf7c3373e80df176cebac77.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NsFwbC7GPoXZx2xUKlhcOcSRnI4/"/></p>
<p><img src="img/5210bb97088400468dc1ecbff6487191.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/F0mebgEpUohzSKxwpnWcIIoBnid/"/></p>
<p>ç¬¬äºŒä¸ªä¸ç”¨çŒœå°±çŸ¥é“æ˜¯ @ä½³æ–‡ å§hhhï¼ˆä½³æ–‡ï¼Œå¿«æ¥å­¦ğŸ˜‰ï¼‰</p>
<p><img src="img/993ec76c7910b0ea097ad23c914e69e5.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/U8N8b4crnoyhB4x6q8bcz7ien1c/"/></p>
<p><img src="img/4654674e3a7730f43830eb947664b6d1.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/USdUbkfdZo5nWexcxcic79Ofnoe/"/></p>
<p><img src="img/66ff56c94f2f2cfb58cbe92c243b6c38.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MemJbx1cSoL4TEx7wDFcHaecnoh/"/></p>
<h3>7 é‡åˆ°bug</h3>
<p>è¿™é‡Œè¿˜å‡ºç°å°æ’æ›²ï¼Œæ‰¾ @Time çš„å¤´åƒæ²¡æ‰¾åˆ°</p>
<p><img src="img/3b0b803f7ad7d9eb7826cf9571c15d5d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NG7Db4fW2oJbcjxc1KBcKj7xnLb/"/></p>
<p>æ²¡æ‰¾åˆ°åŸå› å°±æ˜¯é˜ˆå€¼å¤ªé«˜äº†ï¼ŒæŠŠé»˜è®¤çš„0.8è°ƒæ•´ä¸º0.7</p>
<p>æˆ–è€…ä½¿ç”¨å‘½ä»¤ python .\find_me.py .\images\scys.jpg --threshold 0.7</p>
<p><img src="img/fd744d2b1482df3617788bc657cfc22c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QRDgb9rE0ot3zRxvN4RcsWC5nnd/"/></p>
<p>å†è¯•ä¸€ä¸‹å°±å¯ä»¥äº†ï¼</p>
<p><img src="img/84f81acd059da38de66c8c1638c3a253.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/AbZQbYppAozM5sxyOG9cbv1snMe/"/></p>
<p><img src="img/e9420f374f70d78803ded7a06524e51e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UnjpbRnHUoT7UrxxY71cbIhEnIc/"/></p>
<p><img src="img/039da561d5ed16ee040168db8b98b980.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Cd8Rbi4kDojS4wxqzkrc0A86nMh/"/></p>

<h3>6 ä»£ç </h3>
<p>æœ€åé™„ä¸Šä»£ç </p>
<p>ä½¿ç”¨æ–¹å¼</p>
<p>å®‰è£…åº“ï¼špip install opencv-python numpy</p>
<p>è¿è¡Œï¼špython .\find_me.py å¤§å›¾è·¯å¾„ å¤´åƒè·¯å¾„</p>
<pre>import cv2
import numpy as np
import argparse

def non_max_suppression(matches, overlap_thresh=0.3):
    """
    å¯¹é‡å çš„åŒ¹é…ç»“æœè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶
    
    å‚æ•°:
        matches: åŒ¹é…ç»“æœåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º (x, y, w, h, conf)
        overlap_thresh: é‡å é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤é˜ˆå€¼çš„é‡å åŒºåŸŸå°†è¢«æŠ‘åˆ¶
    """
    if not matches:
        return []
    
    # å°†åŒ¹é…ç»“æœè½¬æ¢ä¸ºnumpyæ•°ç»„
    boxes = np.array([[x, y, x + w, y + h] for x, y, w, h, _ in matches])
    scores = np.array([conf for _, _, _, _, conf in matches])
    
    # è®¡ç®—é¢ç§¯
    area = (boxes[:, 2] - boxes[:, 0]) * (boxes[:, 3] - boxes[:, 1])
    
    # æŒ‰ç…§åŒ¹é…åº¦æ’åº
    idxs = np.argsort(scores)[::-1]
    
    keep = []
    while len(idxs) &gt; 0:
        # ä¿ç•™å½“å‰æœ€é«˜åˆ†æ•°çš„æ¡†
        current = idxs[0]
        keep.append(current)
        
        if len(idxs) == 1:
            break
            
        # è®¡ç®—å…¶ä»–æ¡†ä¸å½“å‰æ¡†çš„IoU
        xx1 = np.maximum(boxes[current, 0], boxes[idxs[1:], 0])
        yy1 = np.maximum(boxes[current, 1], boxes[idxs[1:], 1])
        xx2 = np.minimum(boxes[current, 2], boxes[idxs[1:], 2])
        yy2 = np.minimum(boxes[current, 3], boxes[idxs[1:], 3])
        
        w = np.maximum(0, xx2 - xx1)
        h = np.maximum(0, yy2 - yy1)
        
        overlap = (w * h) / area[idxs[1:]]
        
        # åˆ é™¤é‡å åº¦é«˜çš„æ¡†
        idxs = np.delete(idxs, np.concatenate(([0], np.where(overlap &gt; overlap_thresh)[0] + 1)))
    
    return [matches[i] for i in keep]

def find_avatar(large_image_path, template_path, threshold=0.8):
    """
    åœ¨å¤§å›¾ä¸­æŸ¥æ‰¾ç›®æ ‡å¤´åƒ
    
    å‚æ•°:
        large_image_path: åŒ…å«å¤šä¸ªå¤´åƒçš„å¤§å›¾è·¯å¾„
        template_path: è¦æŸ¥æ‰¾çš„å•ä¸ªå¤´åƒå›¾ç‰‡è·¯å¾„
        threshold: åŒ¹é…é˜ˆå€¼ï¼Œè¶Šé«˜è¦æ±‚è¶Šä¸¥æ ¼
    
    è¿”å›:
        æ‰¾åˆ°çš„å¤´åƒå›¾ç‰‡åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º(x, y, w, h)å’ŒåŒ¹é…åº¦
    """
    # è¯»å–å›¾ç‰‡
    large_image = cv2.imread(large_image_path)
    template = cv2.imread(template_path)
    
    # å°†æ¨¡æ¿å›¾ç‰‡è°ƒæ•´ä¸º64x64
    template = cv2.resize(template, (64, 64))
    
    # è·å–æ¨¡æ¿å°ºå¯¸
    h, w = template.shape[:2]
    
    # æ¨¡æ¿åŒ¹é…
    result = cv2.matchTemplate(large_image, template, cv2.TM_CCOEFF_NORMED)
    
    # æ‰¾åˆ°åŒ¹é…ä½ç½®
    locations = np.where(result &gt;= threshold)
    matches = []
    
    # è·å–æ‰€æœ‰åŒ¹é…ä½ç½®
    for pt in zip(*locations[::-1]):
        matches.append((pt[0], pt[1], w, h, result[pt[1], pt[0]]))
    
    # åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶
    matches = non_max_suppression(matches)
    
    return matches

def draw_matches(image_path, matches):
    """
    åœ¨åŸå›¾ä¸Šæ ‡è®°åŒ¹é…ä½ç½®å¹¶ä¿å­˜ç»“æœï¼Œå¹¶ä¿å­˜æ‰©å¤§èŒƒå›´çš„æˆªå›¾
    """
    image = cv2.imread(image_path)
    for x, y, w, h, conf in matches:
        # ç”»çº¢è‰²çŸ©å½¢æ¡†ï¼Œæ‰©å¤§æ¡†çš„èŒƒå›´ï¼Œå¢åŠ çº¿æ¡ç²—ç»†
        padding = 20  # æ¡†çš„æ‰©å±•èŒƒå›´
        thickness = 5  # çº¿æ¡ç²—ç»†
        
        # è®¡ç®—æ‰©å±•åçš„æ¡†çš„åæ ‡
        box_x1 = max(0, x - padding)
        box_y1 = max(0, y - padding)
        box_x2 = min(image.shape[1], x + w + padding)
        box_y2 = min(image.shape[0], y + h + padding)
        
        # åœ¨åŸå›¾ä¸Šç”»æ‰©å±•åçš„çº¢è‰²æ¡†
        cv2.rectangle(image, (box_x1, box_y1), (box_x2, box_y2), (0, 0, 255), thickness)
        
        # è®¡ç®—æ‰©å±•åŒºåŸŸçš„åæ ‡ï¼ˆ3000x3000ï¼‰
        extend_size = 3000
        half_extend = extend_size // 2
        center_x = x + w // 2
        center_y = y + h // 2
        
        # è®¡ç®—æ‰©å±•åŒºåŸŸçš„è¾¹ç•Œï¼Œç¡®ä¿ä¸è¶…å‡ºåŸå›¾èŒƒå›´
        x1 = max(0, center_x - half_extend)
        y1 = max(0, center_y - half_extend)
        x2 = min(image.shape[1], center_x + half_extend)
        y2 = min(image.shape[0], center_y + half_extend)
        
        # æˆªå–æ‰©å±•åŒºåŸŸ
        extended_avatar = image[y1:y2, x1:x2]
        
        # åœ¨æ‰©å±•åŒºåŸŸå›¾ç‰‡ä¸Šä¹Ÿç”»æ‰©å±•åçš„çº¢è‰²æ¡†
        relative_x = x - x1
        relative_y = y - y1
        box_relative_x1 = max(0, relative_x - padding)
        box_relative_y1 = max(0, relative_y - padding)
        box_relative_x2 = min(extended_avatar.shape[1], relative_x + w + padding)
        box_relative_y2 = min(extended_avatar.shape[0], relative_y + h + padding)
        
        cv2.rectangle(extended_avatar, 
                     (box_relative_x1, box_relative_y1), 
                     (box_relative_x2, box_relative_y2), 
                     (0, 0, 255), thickness)
        
        # ä¿å­˜æ‰©å±•åŒºåŸŸæˆªå›¾
        cv2.imwrite(f'matched_avatar_{x}_{y}.png', extended_avatar)
    
    # ä¿å­˜æ ‡è®°åçš„å¤§å›¾
    cv2.imwrite('result.png', image)

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # åˆ›å»ºå‘½ä»¤è¡Œå‚æ•°è§£æå™¨
    parser = argparse.ArgumentParser(description='åœ¨å¤§å›¾ä¸­æŸ¥æ‰¾æŒ‡å®šå¤´åƒ')
    parser.add_argument('large_image', help='åŒ…å«å¤šä¸ªå¤´åƒçš„å¤§å›¾è·¯å¾„')
    parser.add_argument('template', help='è¦æŸ¥æ‰¾çš„å¤´åƒå›¾ç‰‡è·¯å¾„')
    parser.add_argument('--threshold', type=float, default=0.7,
                      help='åŒ¹é…é˜ˆå€¼ (0-1 ä¹‹é—´ï¼Œé»˜è®¤: 0.8)')
    
    # è§£æå‘½ä»¤è¡Œå‚æ•°
    args = parser.parse_args()
    
    # æŸ¥æ‰¾åŒ¹é…
    matches = find_avatar(args.large_image, args.template, args.threshold)
    
    if matches:
        print(f"æ‰¾åˆ° {len(matches)} ä¸ªåŒ¹é…ç»“æœ")
        # ç»˜åˆ¶ç»“æœ
        draw_matches(args.large_image, matches)
        print("ç»“æœå·²ä¿å­˜")
    else:
        print("æœªæ‰¾åˆ°åŒ¹é…ç»“æœ")

if __name__ == "__main__":
    main()</pre>