<h1>YouTube Shorts å…¨æµç¨‹è‡ªåŠ¨åŒ–è¿è¥å®è·µ</h1>
<blockquote>æ¥æºï¼š<a href="https://ia0969wpr2.feishu.cn/docx/ELcgdUKJToK95YxuoCUc33XVnzh">https://ia0969wpr2.feishu.cn/docx/ELcgdUKJToK95YxuoCUc33XVnzh</a></blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é’±å¡˜æ±Ÿé²¤ï¼Œå—äº¦ä»çš„è¶…çº§æ ‡å¯å‘ï¼Œå‰ä¸€é˜µå¼€å§‹æ¢ç´¢ YouTube shorts çš„AIè§†é¢‘è¿è¥ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„æ‘¸ç´¢ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹ŸæŠŠè‡ªå·±çš„æ•´ä¸ªæµç¨‹æ…¢æ…¢è‡ªåŠ¨åŒ–èµ·æ¥ï¼Œæœ€åˆå› è§‰å¾—è¿™ä¸œè¥¿ä¹Ÿæ²¡å•¥æŠ€æœ¯éš¾ç‚¹ï¼Œè€Œä¸”ä¹Ÿæ‰åˆšåˆšèµ·æ­¥æ²¡åšå‡ºæˆç»©æ¥ï¼Œæ²¡æœ‰å¤ªå¤šå€¼å¾—è¯´çš„çš„åœ°æ–¹ï¼Œå‰ä¸¤å¤©å’Œ@åœŸè±†å› èŠå¤©ï¼Œè¯´èµ·æ¥äº†è¿™ä»¶äº‹ï¼Œåœ¨ä»–çš„æ¿€åŠ±ä¸‹æœ€ç»ˆæ‰“ç®—åˆ†äº«ä¸‹ç›®å‰çš„æµç¨‹ï¼Œå¸Œæœ›èƒ½ä¸ºåŒæ ·åœ¨æ¢ç´¢è¿™æ¡è·¯çš„æœ‹å‹æä¾›ä¸€äº›æœ‰ç”¨çš„å‚è€ƒã€‚</p>

<p>æ–‡ç« ä¸»è¦ä»‹ç»äº†æˆ‘å¦‚ä½•å€ŸåŠ© cursor + AI å®ç° youtube shorts é«˜æ•ˆè¿è¥çš„è¿‡ç¨‹ï¼Œç›®å‰é™¤äº†äººå·¥ä»‹å…¥ç­›é€‰å›¾ç‰‡ï¼Œç­›é€‰è§†é¢‘å¤–ï¼Œä»é‡‡é›†ã€å¯¹æ ‡è§†é¢‘å¤åˆ»ã€åˆ›æ„ç”Ÿæˆåˆ°å›¾ç‰‡ä¸è§†é¢‘ç”Ÿæˆã€å‰ªè¾‘å’Œå¤šè´¦å·çŸ©é˜µè¿è¥éƒ½å·²ç»å®ç°äº†è‡ªåŠ¨åŒ–ï¼Œå½“ç„¶æˆ‘ä¹‹å‰ä¹Ÿå°è¯•äº†å…¨è‡ªåŠ¨æ— äººå‚ä¸ï¼Œä½†æ˜¯æ€»ä½“è´¨é‡å¹¶ä¸é«˜ï¼Œæ‰€ä»¥åé¢æ…¢æ…¢åŠ å…¥äº†åæ¨å›¾ç‰‡ç­›é€‰å’Œç”Ÿæˆè§†é¢‘ç­›é€‰ç­‰å‡ ä¸ªäººå·¥ä»‹å…¥çš„èŠ‚ç‚¹ï¼Œä¸»æ‰“ä¸€ä¸ªé¥±å’Œå¼ç”Ÿæˆï¼Œæœ€åç­›é€‰ã€‚</p>

<p>ç›®å‰ä¸€ä¸ªè§†é¢‘çš„æˆæœ¬æ ¹æ®ä½¿ç”¨çš„å›¾ç‰‡æ¨¡å‹ä¸åŒå¤§æ¦‚åœ¨å‡ åˆ†é’±åˆ°å‡ æ¯›é’±ä¹‹é—´ï¼Œå½“ç„¶æˆæœ¬å¯ä»¥è¿›ä¸€æ­¥å‹ç¼©ï¼Œä½†æ˜¯å°±æ²¡åŠæ³•ä¿è¯è´¨é‡äº†ï¼Œæ‰€ä»¥åœ¨ä¿è¯è´¨é‡çš„å‰æä¸‹ï¼Œç›®å‰çš„è¿™ä¸ªæˆæœ¬æ€»ä½“è¿˜æ˜¯èƒ½æ¥å—çš„ã€‚</p>

<p>ä½¿ç”¨çš„å·¥å…·æœ‰</p>
<p>æç¤ºè¯åæ¨ï¼šmidjourney describe å’Œ gpt4o-miniï¼Œ</p>
<p>å›¾ç‰‡ç”Ÿæˆï¼šflux+comfy/midjourney</p>
<p>è§†é¢‘ç”Ÿæˆï¼šå³æ¢¦/å¯çµ/æµ·èºã€‚</p>

<p>å†æ¬¡è¯´æ˜ä¸‹èƒŒæ™¯ï¼šè¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨è‡ªå·±èµ·å·çš„è¿‡ç¨‹ä¸­åšäº†ä¸€ä¸ªè‡ªå·±çš„å†…å®¹ç®¡ç†å’Œå‘å¸ƒä¸­å¿ƒçš„ç»å†ã€‚æ•´ä¸ªé¡¹ç›®çš„ä»£ç éƒ½æ˜¯ç”± Cursor è¾…åŠ©ç”Ÿæˆï¼Œä½†æ˜¯é™äºç¯‡å¹…ä¸å¯èƒ½åœ¨æ–‡ä¸­åˆ—å‡ºæ‰€æœ‰çš„å†å²promptï¼Œå†µä¸”ç°ä»£ AI æ¨¡å‹çš„èƒ½åŠ›ä¹Ÿä»Šéæ˜”æ¯”ï¼Œæˆ‘ä»¬ä¸éœ€è¦å„ç±»â€œå°ç¥â€æˆ–è€…ä¸€å¤§å †ç†è®ºèŠ±é‡Œèƒ¡å“¨çš„æç¤ºè¯æŠ€å·§ï¼Œæ¸…æ™°åœ°è¡¨è¾¾éœ€æ±‚æˆ‘ä»¬å°±èƒ½å¤Ÿå®Œæ•´åœ°æ„å»ºä¸€ä¸ªäº§å“ï¼Œåªè¦å¼€å§‹å°±è¿™ä»¶äº‹å°±å¾ˆç®€å•ã€‚</p>

<p>æˆ‘åœ¨æ–‡ç« ä¸­ä¼šæŠŠä¸€äº›æ¯”è¾ƒå¤æ‚ï¼ŒAIå¤šè½®æ‰èƒ½è°ƒè¯•å®ç°çš„åŠŸèƒ½çš„æ ¸å¿ƒä»£ç ä¹Ÿè´´äº†å‡ºæ¥ï¼Œæ¯”å¦‚åœºæ™¯åˆ‡åˆ†ã€è§†é¢‘ç”Ÿæˆè‡ªåŠ¨åŒ–ã€discordæˆ–è€…å³æ¢¦ç­‰æ— æ°´å°ä¸‹è½½çš„æ²¹çŒ´è„šæœ¬ç­‰ç­‰ã€‚ä½†æ˜¯æ›´å¤šçš„è¿˜æ˜¯éœ€è¦ä½ è‡ªå·±å»å°è¯•å»è°ƒè¯•ã€‚</p>

<p>å¦å¤–å› ä¸ºæ¶‰åŠåˆ°çš„å°åŠŸèƒ½ç»†èŠ‚æ¯”è¾ƒå¤šï¼Œå—é™äºç¯‡å¹…å¾ˆéš¾ä¸€ä¸€è¯¦ç»†è®²æ¸…æ¥šï¼Œæ‰€ä»¥æ–‡ç« ç²—è¯»èµ·æ¥è„‰ç»œå¯èƒ½æ¯”è¾ƒä¹±æ··ä¹±å’ŒæŠ½è±¡ï¼Œè§‰å¾—æœ‰è·³è·ƒæ€§ï¼Œä½†æ˜¯å®¢è§‚åœ°è®²ï¼Œå¦‚æœä½ å·²ç»è·‘é€šäº†æ•´ä¸ªæµç¨‹æ­£åœ¨å¤„äºéœ€è¦æ”¾å¤§çš„é˜¶æ®µï¼Œè¿™ç¯‡æ–‡ç« ä¸€å®šä¼šå¯¹ä½ æœ‰å‚è€ƒä»·å€¼ï¼Œå½“ç„¶äº†ä¹Ÿè¿˜æœ‰å¾ˆå¤šä¸è¶³ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶åœ¨æ˜Ÿçƒä¸­è®¨è®ºï¼Œåœ¨äº¤æµä¸­æˆ‘ä»¬éƒ½èƒ½æ‰¾åˆ°æ›´å¥½çš„ç­”æ¡ˆã€‚</p>

<p>ä¸‹é¢æ˜¯æ•´ä½“çš„å®ç°è¿‡ç¨‹ã€‚</p>

<h2>å¯¹æ ‡è§†é¢‘è‡ªåŠ¨æ‹†è§£ä¸å¤åˆ»</h2>

<p>é¦–å…ˆæ˜¯å¯¹æ ‡è§†é¢‘çš„åƒç´ çº§æ‹†è§£å’Œè‡ªåŠ¨ç”Ÿæˆã€‚</p>

<p>æˆ‘ä»¬æ ¹æ®å¯¹æ ‡è§†é¢‘ç”Ÿæˆæ–°è§†é¢‘çš„æ­¥éª¤æœ‰å“ªäº›å‘¢ï¼Ÿä¸»è¦æ˜¯ è§†é¢‘ä¸‹è½½-&gt; åœºæ™¯åŒºåˆ† -&gt; æç¤ºè¯åæ¨ -&gt; ç”Ÿæˆæ–°å›¾ç‰‡ -&gt; ç”Ÿæˆè§†é¢‘ -&gt; å‰ªè¾‘ -&gt; æ·»åŠ BGM -&gt; å¯¼å‡º</p>

<p>é‚£ä»¥ä¸Šæ­¥éª¤å“ªäº›èƒ½è‡ªåŠ¨åŒ–å‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯éƒ½èƒ½ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯è´¨é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆå›¾ç‰‡å’Œç”Ÿæˆè§†é¢‘è¿™é‡Œäººå·¥ä»‹å…¥ç­›é€‰ä¸‹ï¼Œå…¶ä»–çš„éƒ½ä¸éœ€è¦äº†ã€‚å› ä¸ºæˆ‘æœ¬èº«èƒ½æŠ•å…¥åˆ°youtubeçš„æ—¶é—´æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥ä¸€å¼€å§‹çš„é¢„æœŸå°±æ˜¯ï¼šè¾“å…¥å¯¹æ ‡è§†é¢‘é“¾æ¥ï¼Œè‡ªåŠ¨åŒ–ç”Ÿæˆå¤åˆ»åˆ†é•œè§†é¢‘ç‰‡æ®µï¼Œè®©æˆ‘åŠ¨åŠ¨é¼ æ ‡æˆ‘ç­›é€‰ä¸‹ï¼Œå…¶ä»–çš„åˆ‡åˆ†ï¼Œé‡ç»˜ï¼Œå‰ªè¾‘ï¼Œä¸Šä¼ ï¼Œæ•°æ®ç»Ÿè®¡å…¨éƒ¨éƒ½è¦è‡ªåŠ¨åŒ–ã€‚</p>

<p>è¦å®Œæˆæ—¶ä¸Šé¢é¢„æƒ³çš„ç¬¬ä¸€æ­¥å°±æ˜¯æˆ‘ä»¬è¦åšä¸€ä¸ªè‡ªå·±çš„ç´ æä¸­å¿ƒï¼Œç”¨äºåˆ›å»ºè‰ç¨¿é¡¹ç›®ã€ç®¡ç†è§†é¢‘ã€ç®¡ç†ä»£ç†ä¿¡æ¯å’ŒçŸ©é˜µè´¦å·ç­‰ã€‚</p>

<p><img src="img/96d555de69e9d4d25a21c50b2ddead36.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CL2xbgLp3o30XixzBUKcX1XinWg/"/></p>

<p>è¿™ä¸ªç›´æ¥cursorä¸€é”®ç”Ÿæˆå¾®è°ƒå°±è¡Œäº†ï¼Œç¬¬ä¸€ç‰ˆçš„è‰ç¨¿å¤§æ¦‚æ˜¯è¿™æ ·å­çš„ï¼Œåªè¦æˆ‘ä»¬åˆ›å»ºäº†åŸºæœ¬çš„é¡¹ç›®å’Œç´ æä¸­å¿ƒï¼Œåé¢æˆ‘ä»¬å¤åˆ»çš„è§†é¢‘è‰ç¨¿å°±æœ‰äº†å­˜å‚¨å’Œç®¡ç†çš„å…¥å£ã€‚å› ä¸ºæ—¶é—´æ¯”è¾ƒä¹…è¿œäº†ï¼Œåˆå§‹çš„æç¤ºè¯ä¹Ÿæ²¡è®°å½•ï¼Œä½†æ˜¯å¤§è‡´åŠŸèƒ½æ˜¯è¿™æ ·çš„ï¼Œæˆ‘åˆé‡æ–°å†™äº†ä¸€ä¸ªåˆå§‹é¡¹ç›®çš„æç¤ºè¯è¯•äº†ä¸‹ä¹Ÿèƒ½ç”Ÿæˆï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚å†è°ƒæ•´ï¼š</p>

<p>è¯·å¸®æˆ‘åšä¸€ä¸ªyoutube shorts çš„ç´ æç®¡ç†ã€è§†é¢‘è‰ç¨¿ä¸å‰ªè¾‘å’Œè‡ªåŠ¨å‘å¸ƒç³»ç»Ÿã€‚å·¦ä¾§èœå•æ åŒ…æ‹¬ï¼šè§†é¢‘è‰ç¨¿ç®¡ç†ã€åˆ†é•œåˆ—è¡¨ã€ç´ æç®¡ç†ã€å¤šç¯å¢ƒä¸è´¦å·ç®¡ç†ã€åœ¨çº¿è§†é¢‘å¤åˆ»ã€è®¾ç½®ã€comfyå·¥ä½œæµç®¡ç†ã€ä¸ªäººæ•°æ®ã€‚æŠ€æœ¯æ ˆä½¿ç”¨python fastapi + jinjaï¼Œè¯·é¦–å…ˆå®Œæˆé¡¹ç›®æ¡†æ¶çš„æ­å»ºã€‚</p>

<p>è¯·å¸®æˆ‘å®Œæˆè‰ç¨¿ç®¡ç†åˆ—è¡¨é¡µï¼›ä¸Šé¢ä¸€ä¸ªæ–°å»ºè§†é¢‘è‰ç¨¿æŒ‰é’®ï¼Œæ–°å»ºçš„æ—¶å€™å¼¹å‡ºæ¡†é€‰æ‹©ï¼Œæ¨¡å‹ã€è„šæœ¬ã€åˆ†é•œæ•°é‡ã€å‘å¸ƒè´¦å·ã€å·¥ä½œæµï¼ˆé€‰æ‹©æ¡†ï¼‰ã€‚</p>

<p>åˆ—è¡¨é¡µå­—æ®µæœ‰ï¼šåºå·ã€æ¨¡å‹ã€è„šæœ¬ã€å›¾ç‰‡æ•°é‡ã€è§†é¢‘æ•°é‡ã€åˆ›å»ºæ—¶é—´ã€å‘å¸ƒè´¦å·ã€å‘å¸ƒçŠ¶æ€ã€å‘å¸ƒæ—¶é—´ã€‚æ“ä½œæ æœ‰æŸ¥çœ‹è¯¦æƒ…å’Œé¢„è§ˆæˆç‰‡ã€‚</p>

<p>è¯·å¸®æˆ‘æ–°å»ºåˆ†é•œåˆ—è¡¨é¡µï¼Œä¸Šé¢æœ‰ç­›é€‰é¡¹ï¼šé¡¹ç›®åç§°ï¼ˆå•é€‰ï¼‰ã€‚æ“ä½œæŒ‰é’®æœ‰ï¼šæ–°å¢åˆ†é•œï¼ˆç‚¹å‡»åå¼¹çª—å¯ä»¥å¡«å†™åˆ—è¡¨ä¸­çš„å­—æ®µå¤–åŠ ä¸€ä¸ªæ’åºï¼‰ï¼›ä¸€é”®é‡æ–°ç”Ÿæˆå…³é”®è¯ã€ä¸€é”®ç”Ÿæˆå›¾ç‰‡ã€ä¸€é”®ç”Ÿæˆè§†é¢‘ã€ä¸€é”®åˆæˆæˆç‰‡ã€å¯¼å‡ºå‰ªæ˜ è‰ç¨¿ç®±ã€å‘å¸ƒæ²¹ç®¡ï¼›åˆ—è¡¨é¡µå­—æ®µæœ‰åºå·ã€åˆ†é•œå†…å®¹ã€å›¾ç‰‡æç¤ºè¯ã€å›¾ç‰‡æç¤ºè¯è‹±æ–‡ã€è§†é¢‘æç¤ºè¯ã€è§†é¢‘æç¤ºè¯è‹±æ–‡ã€å­—å¹•ã€å­—å¹•è‹±æ–‡ã€å›¾ç‰‡ã€è§†é¢‘ï¼›æ“ä½œåˆ—æŒ‰é’®æœ‰ï¼šä¿å­˜ã€é‡æ–°ç”Ÿæˆå›¾ç‰‡æç¤ºè¯ã€é‡æ–°ç”Ÿæˆè§†é¢‘æç¤ºè¯ï¼›å¦å¤–æˆ‘å¸Œæœ›å›¾ç‰‡æç¤ºè¯ã€è§†é¢‘æç¤ºè¯ã€å­—å¹•éƒ½å¯ä»¥ç›´æ¥åœ¨è¡¨æ ¼ä¸­åŒå‡»ä¿®æ”¹ï¼Œè¿™æ ·ä¿®æ”¹ä¹‹åæ–¹ä¾¿æˆ‘ç‚¹å‡»ç›´æ¥ä¿å­˜ï¼šæ³¨æ„å›¾ç‰‡å’Œè§†é¢‘å­—æ®µä¸­çš„å€¼æ˜¯å¤šæ¡æœ¬åœ°çš„å›¾ç‰‡å’Œè§†é¢‘åœ°å€ï¼Œå¦‚ï¼šJ:\ai\output\ComfyUI_00167_.pngï¼Œæ³¨æ„è¦æŠŠè§†é¢‘å’Œå›¾ç‰‡ç›´æ¥åœ¨è¡¨æ ¼ä¸­æ¸²æŸ“å‡ºæ¥ï¼Œæ–¹ä¾¿æˆ‘æŸ¥çœ‹åˆ†é•œçš„è¯¦æƒ…ã€‚æˆ‘è¦æ±‚ä½ å†™å‡ æ¡ç¤ºä¾‹æ•°æ®ï¼Œæ–¹ä¾¿æˆ‘æµ‹è¯•</p>
<p>æ³¨æ„ä¸Šé¢åªæ˜¯å‰ç«¯ç•Œé¢çš„å¼€å‘ï¼Œåç«¯æˆ‘ä»¬åœ¨å®ç°è¿‡ç¨‹ä¸­ä¸æ–­ç”¨è‡ªç„¶è¯­è¨€æŒ‡æŒ¥cursor å°±è¡Œäº†ã€‚</p>

<p>ä¸‹é¢å°±å¯ä»¥ç»§ç»­äº†ç¬¬ä¸€é¡¹ï¼šå¯¹æ ‡è§†é¢‘çš„è‡ªåŠ¨æ‹†è§£ä¸å¤åˆ»</p>

<h3>è§†é¢‘ä¸‹è½½</h3>

<p>è¯´åˆ°å¤åˆ»ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯ä¸‹è½½è§†é¢‘ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥åœ¨è°·æ­Œä¸Šä½¿ç”¨æœç´¢å¹¶æ‰“å¼€ä¸€ä¸ªæ²¹ç®¡ä¸‹è½½ç«™ç‚¹ï¼Œç„¶åæ‰‹åŠ¨å¤åˆ¶é“¾æ¥ï¼Œä¸‹è½½è§†é¢‘ã€éŸ³ä¹ï¼Œå†æ’­æ”¾è§†é¢‘æ‹–åŠ¨æˆªå–åœºæ™¯å›¾ç‰‡ï¼Œä½†æ˜¯è¿™ä¸ªæ•´ä¸ªæµç¨‹é“¾è·¯å¤ªé•¿äº†ï¼Œè¿™æ ·ä¸æ–¹ä¾¿çº³å…¥åˆ°æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–æµç¨‹ä¸­ï¼Œå³ä½¿ä½¿ç”¨RPAä½œä¸ºç²˜åˆï¼Œä¹Ÿå¾ˆéš¾çœŸæ­£ææ•ˆã€‚æ‰€ä»¥æˆ‘ä»¬è¦è‡ªå·±å†™ä¸€ä¸ªYouTubeè§†é¢‘å’ŒBGMä¸‹è½½å·¥å…·ï¼Œè¿™æ˜¯ä¸€åˆ‡è‡ªåŠ¨åŒ–çš„èµ·ç‚¹ã€‚</p>

<p>ä¸éš¾ï¼Œæˆªå›¾ç»™cursorååˆ†é’Ÿæå®šã€‚å®Œæˆåå¦‚ä¸‹ï¼š</p>

<p><img src="img/26b8c5e754cd600d656014582597765b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HreWb8OrponaPXxLjqtchMbfn5F/"/></p>

<p>å¤åˆ»è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨è°·æ­Œæœç´¢ä¸€ä¸ªåœ¨çº¿ä¸‹è½½ç«™ï¼Œæ¯”å¦‚å°±å®ƒäº†ï¼š</p>
<p><img src="img/86e6b35fa2b54002b64b9013baaa7b8c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Zo64baKyKoSvGJx7QV4csALZnzf/"/></p>
<p>Cursor ç›´æ¥ctrl+iè°ƒèµ·composerï¼Œè¾“å…¥æˆ‘ä»¬çš„è¦æ±‚</p>
<p><img src="img/3e848f8636253b233327919c35a42da5.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/OQerbHfn6oCANXxhTEocKGSHn0c/"/></p>
<p><img src="img/57047d93ab49e713aefa111d51625cb8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ErX9bFAdjoP5O3xR7r7c0n7dnRh/"/></p>
<p>å®‰è£…å¯¹åº”ä¾èµ–ï¼ŒæˆåŠŸå¯åŠ¨ï¼Œè¿™é‡Œæˆ‘ä»¬æ ¹æ®è‡ªå·±çš„å®é™…éœ€æ±‚å¾®è°ƒå°±è¡Œï¼Œä¸éœ€è¦æ€€ç–‘claudeçš„èƒ½åŠ›ï¼Œå°±æ˜¯è¿™ä¹ˆå¼ºã€‚</p>

<p>ä¸ºäº†åé¢çš„è‡ªåŠ¨åŒ–ï¼Œæˆ‘åé¢åˆåšäº†äº›æ”¹åŠ¨ï¼ŒæŠŠæ•°æ®å­˜å‚¨åˆ°äº†è‡ªå·±çš„æ•°æ®åº“ä¸­ï¼Œæ–¹ä¾¿è¿›è¡Œæ•°æ®æœ‰çŠ¶æ€çš„å›æº¯ã€‚</p>

<p>æˆ‘ä»¬éšä¾¿è¾“å…¥è§†é¢‘åœ°å€ï¼Œç‚¹å‡»ä¸‹è½½ä¹‹åï¼Œå‘ç°BGMå’Œè§†é¢‘éƒ½ä¸‹è½½å¥½äº†ã€‚</p>
<p><img src="img/0d610add0931a790c3f813208e3b1f3c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/An4vbwZnzoVnHexPPldcdrb7nPc/"/></p>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ‰¾ä¸ªå¯¹æ ‡è§†é¢‘ï¼Œæ¯”å¦‚è¿™ä¸ªï¼šhttps://www.youtube.com/watch?v=_KFzaJSxBcYï¼Œåœ¨æˆ‘ä»¬è‡ªå·±çš„åœ¨çº¿ä¸‹è½½æœåŠ¡è¾“å…¥é“¾æ¥ï¼Œç‚¹å‡»ä¸‹è½½ï¼Œç»“æŸã€‚</p>

<p>è§†é¢‘ä¸‹è½½å¥½äº†ä¸‹ä¸€æ­¥å°±æ˜¯åœºæ™¯æå–äº†ï¼Œæˆ‘ä»¬è¦ç²¾å‡†è¯†åˆ«å‡ºè§†é¢‘ä¸­çš„æ‰€æœ‰åœºæ™¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨opencvå°±å¯ä»¥äº†ã€‚</p>

<p>æ€è·¯å°±æ˜¯é€å¸§æ‹†è§£ï¼Œæˆ–è€…æ ¹æ®æœ€å°åœºæ™¯æ—¶é•¿ï¼Œæ¯”å¯¹ä¸åŒåœºæ™¯çš„ç»“æ„ç›¸ä¼¼å€¼å’Œé¢œè‰²ç›¸ä¼¼å€¼ï¼Œæœ€ååˆ‡ç‰‡å‡ºæ¥æ‰€æœ‰åœºæ™¯ï¼Œåˆ‡ç‰‡åˆ¤æ–­çš„æ—¶å€™æœ‰äº›å‰ªè¾‘ä¼šæœ‰è½¬åœºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸è¦æ‹¿åœºæ™¯å˜åŠ¨çš„ç¬¬ä¸€å¸§ï¼Œè€Œæ˜¯æ ¹æ®åœºæ™¯å˜åŠ¨å»å‰å30å¸§å¯»æ‰¾ç›¸åŒåŒåœºæ™¯ä¸‹çš„æœ€æ¸…æ™°çš„å›¾ç‰‡ï¼Œè¿™é‡Œä¹Ÿæ²¡å•¥é—®é¢˜ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>

<pre>import cv2
import numpy as np
from pathlib import Path
import os
import time

def create_output_dir(output_dir):
    """åˆ›å»ºè¾“å‡ºç›®å½•"""
    os.makedirs(output_dir, exist_ok=True)
    return output_dir

def calculate_frame_clarity(frame):
    """è®¡ç®—å¸§çš„æ¸…æ™°åº¦"""
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    return cv2.Laplacian(gray, cv2.CV_64F).var()

def detect_scene_change(prev_frame, curr_frame, min_threshold=0.15, max_threshold=0.60):
    """
    æ£€æµ‹åœºæ™¯å˜åŒ–
    :param prev_frame: å‰ä¸€å¸§
    :param curr_frame: å½“å‰å¸§
    :param min_threshold: æœ€å°å˜åŒ–é˜ˆå€¼
    :param max_threshold: æœ€å¤§å˜åŒ–é˜ˆå€¼
    :return: (æ˜¯å¦æ˜¯æ–°åœºæ™¯, å˜åŒ–ç¨‹åº¦)
    """
    # è½¬æ¢ä¸ºç°åº¦å›¾
    prev_gray = cv2.cvtColor(prev_frame, cv2.COLOR_BGR2GRAY)
    curr_gray = cv2.cvtColor(curr_frame, cv2.COLOR_BGR2GRAY)
    
    # è®¡ç®—å¸§å·®
    diff = cv2.absdiff(prev_gray, curr_gray)
    
    # åº”ç”¨é«˜æ–¯æ¨¡ç³Šå‡å°‘å™ªå£°
    diff = cv2.GaussianBlur(diff, (5, 5), 0)
    
    # åº”ç”¨é˜ˆå€¼
    _, thresh = cv2.threshold(diff, 25, 255, cv2.THRESH_BINARY)
    
    # è®¡ç®—å˜åŒ–åƒç´ çš„æ¯”ä¾‹
    change_ratio = np.count_nonzero(thresh) / thresh.size
    
    # åˆ¤æ–­æ˜¯å¦æ˜¯æ–°åœºæ™¯
    is_new_scene = min_threshold &lt; change_ratio &lt; max_threshold
    
    return is_new_scene, change_ratio

def split_video_scenes(video_path, output_dir, min_threshold=0.15, max_threshold=0.60, 
                      min_scene_duration=15):
    """
    åˆ†å‰²è§†é¢‘åœºæ™¯
    :param video_path: è§†é¢‘æ–‡ä»¶è·¯å¾„
    :param output_dir: è¾“å‡ºç›®å½•
    :param min_threshold: æœ€å°å˜åŒ–é˜ˆå€¼
    :param max_threshold: æœ€å¤§å˜åŒ–é˜ˆå€¼
    :param min_scene_duration: æœ€å°åœºæ™¯æŒç»­å¸§æ•°
    :return: åœºæ™¯å›¾ç‰‡è·¯å¾„åˆ—è¡¨
    """
    print(f"å¼€å§‹å¤„ç†è§†é¢‘: {video_path}")
    start_time = time.time()
    
    # åˆ›å»ºè¾“å‡ºç›®å½•
    output_dir = create_output_dir(output_dir)
    
    # æ‰“å¼€è§†é¢‘æ–‡ä»¶
    cap = cv2.VideoCapture(video_path)
    if not cap.isOpened():
        raise ValueError("æ— æ³•æ‰“å¼€è§†é¢‘æ–‡ä»¶")
    
    # è·å–è§†é¢‘ä¿¡æ¯
    total_frames = int(cap.get(cv2.CAP_PROP_FRAME_COUNT))
    fps = int(cap.get(cv2.CAP_PROP_FPS))
    print(f"è§†é¢‘ä¿¡æ¯: {total_frames} å¸§, {fps} FPS")
    
    scene_images = []
    scene_count = 0
    frame_count = 0
    frames_since_last_scene = 0
    
    prev_frame = None
    current_scene_frames = []
    
    while cap.isOpened():
        ret, frame = cap.read()
        if not ret:
            break
            
        # æ˜¾ç¤ºè¿›åº¦
        if frame_count % 100 == 0:
            progress = (frame_count / total_frames) * 100
            print(f"å¤„ç†è¿›åº¦: {progress:.1f}%")
        
        # ç¬¬ä¸€å¸§å¤„ç†
        if prev_frame is None:
            prev_frame = frame
            current_scene_frames.append((frame, calculate_frame_clarity(frame)))
            frame_count += 1
            continue
        
        # æ£€æµ‹åœºæ™¯å˜åŒ–
        is_new_scene, change_ratio = detect_scene_change(
            prev_frame, frame, min_threshold, max_threshold
        )
        
        # å°†å½“å‰å¸§æ·»åŠ åˆ°å½“å‰åœºæ™¯
        current_scene_frames.append((frame, calculate_frame_clarity(frame)))
        frames_since_last_scene += 1
        
        # å¦‚æœæ£€æµ‹åˆ°æ–°åœºæ™¯ä¸”å·²ç»è¿‡äº†æœ€å°åœºæ™¯æŒç»­æ—¶é—´
        if is_new_scene and frames_since_last_scene &gt;= min_scene_duration:
            # ä»å½“å‰åœºæ™¯å¸§ä¸­é€‰æ‹©æœ€æ¸…æ™°çš„å¸§
            clearest_frame, _ = max(current_scene_frames, key=lambda x: x[1])
            
            # ä¿å­˜åœºæ™¯å›¾ç‰‡
            scene_path = os.path.join(output_dir, f'scene_{scene_count:03d}.jpg')
            cv2.imwrite(scene_path, clearest_frame)
            scene_images.append(str(Path(scene_path).absolute()))
            
            print(f"æ£€æµ‹åˆ°æ–°åœºæ™¯ {scene_count}, åœ¨å¸§ {frame_count}, å˜åŒ–ç¨‹åº¦: {change_ratio:.3f}")
            
            # é‡ç½®è®¡æ•°å™¨å’Œç¼“å­˜
            scene_count += 1
            frames_since_last_scene = 0
            current_scene_frames = [(frame, calculate_frame_clarity(frame))]
        
        prev_frame = frame
        frame_count += 1
    
    # ä¿å­˜æœ€åä¸€ä¸ªåœºæ™¯
    if current_scene_frames:
        clearest_frame, _ = max(current_scene_frames, key=lambda x: x[1])
        scene_path = os.path.join(output_dir, f'scene_{scene_count:03d}.jpg')
        cv2.imwrite(scene_path, clearest_frame)
        scene_images.append(str(Path(scene_path).absolute()))
    
    # é‡Šæ”¾èµ„æº
    cap.release()
    
    # æ‰“å°ç»Ÿè®¡ä¿¡æ¯
    end_time = time.time()
    processing_time = end_time - start_time
    print(f"\nå¤„ç†å®Œæˆ:")
    print(f"æ€»å…±æ£€æµ‹åˆ° {scene_count + 1} ä¸ªåœºæ™¯")
    print(f"å¤„ç†æ—¶é—´: {processing_time:.2f} ç§’")
    print(f"å¹³å‡æ¯ç§’å¤„ç† {frame_count/processing_time:.1f} å¸§")
    
    return scene_images

def main():
    # é…ç½®å‚æ•°
    video_path = "downloads/video_309622719539707911.mp4"  # æ›¿æ¢ä¸ºä½ çš„è§†é¢‘æ–‡ä»¶è·¯å¾„
    output_dir = "output_scenes"  # è¾“å‡ºç›®å½•
    
    try:
        scene_paths = split_video_scenes(
            video_path=video_path,
            output_dir=output_dir,
            min_threshold=0.15,    # æœ€å°å˜åŒ–é˜ˆå€¼
            max_threshold=0.60,    # æœ€å¤§å˜åŒ–é˜ˆå€¼
            min_scene_duration=15  # æœ€å°åœºæ™¯æŒç»­å¸§æ•°
        )
        
        print("\nåœºæ™¯å›¾ç‰‡è·¯å¾„ï¼š")
        for path in scene_paths:
            print(path)
            
    except Exception as e:
        print(f"å¤„ç†è§†é¢‘æ—¶å‡ºé”™: {str(e)}")

if __name__ == "__main__":
    main()
</pre>

<p>è¿™æ ·ï¼Œè¾“å…¥è§†é¢‘é“¾æ¥ï¼Œè‡ªåŠ¨ä¸‹è½½è§†é¢‘&amp;BGMå¹¶ä¸”è‡ªåŠ¨æ‹†åˆ†åœºæ™¯å›¾å°±å®ç°äº†</p>

<p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥è¿æ¥ï¼Œä¸€åˆ†é’Ÿå·¦å³å°±å¯ä»¥è‡ªåŠ¨ä¸‹è½½å®Œæˆè§†é¢‘ã€BGMå’Œåœºæ™¯åˆ‡åˆ†å®Œæˆï¼Œå¦‚æœéœ€è¦å¤šæ¬¡åˆ†æåˆ‡ç‰‡åœºæ™¯ï¼Œæ–°å¢ä¸€ä¸ªé‡æ–°åˆ†ææŒ‰é’®å°±è¡Œã€‚</p>

<p><img src="img/8fde7de7d45a0c2ee8fe6e9085cf90e1.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DHY3b8CwGoHR22xB8ZScCGJ2nqh/"/></p>
<p><img src="img/30df378cbfd3bc9e74562d702000faa7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/STcOb4yqZodEE5xnxWLc2TfCn1d/"/></p>

<p>æˆ‘ä»¬ç»§ç»­ä¼˜åŒ–ä¸‹åŠŸèƒ½ï¼Œæ¯å¼ å›¾ç‰‡å¯ä»¥é¢„è§ˆï¼Œå¹¶ä¸”å¯ä»¥æ‰‹åŠ¨åˆ é™¤ä¸€äº›ä¸æ»¡æ„çš„åœºæ™¯å›¾ï¼š</p>

<p><img src="img/7ff89fd4923df54cb1f3b30a9d3f6cfa.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PmDDbOlbNoehqoxW4Gqc4avAnUd/"/></p>

<p>è¿™æ ·æˆ‘ä»¬ä»è¾“å…¥é“¾æ¥åˆ°è§†é¢‘å’ŒBGMä¸‹è½½ï¼Œåˆ°å…¨è‡ªåŠ¨æ‹†è§£å®Œåœºæ™¯åˆ‡ç‰‡ï¼Œä¸€ä¸ªè§†é¢‘å¤§æ¦‚åªèŠ±äº†ä¸åˆ°1åˆ†é’Ÿã€‚</p>

<p>æˆ‘ä»¬å¯ä»¥æå‰é‡‡é›†åˆ°æ•°æ®æ¯”è¾ƒå¥½çš„çš„è§†é¢‘ï¼Œæ‰¹é‡åå°è‡ªåŠ¨åŒ–æ‹†è§£ä¸å¤åˆ»å°±è¡Œï¼Œç¨å¾®å¼€ä¸ªå¹¶å‘ï¼Œä¸€æ™šä¸Šåˆ‡ä¸€ä¸¤åƒä¸ªè§†é¢‘ç®€ç®€å•å•ï¼Œç¬¬äºŒå¤©é†’æ¥æ‰‹åŠ¨ç­›é€‰å›¾ç‰‡å°±è¡Œäº†ã€‚</p>

<p>ä¸‹ä¸€æ­¥æ˜¯æ ¹æ®åˆ‡åˆ†å‡ºæ¥çš„å›¾ç‰‡åæ¨æç¤ºè¯ã€‚</p>

<h3>å›¾ç‰‡åæ¨</h3>

<p>æ‹¿åˆ°å„ä¸ªåœºæ™¯å›¾ç‰‡æˆ‘ä»¬å°±å¯ä»¥åå‘è·å–æç¤ºè¯äº†ï¼Œå’‹åŠå‘¢ï¼Ÿæ€»ä¸èƒ½æ‰‹åŠ¨æŠŠæœ¬åœ°å›¾ç‰‡ä¸Šä¼ ç»™midjourney æˆ–è€… gpt å»æè¿°ï¼Œç„¶ååœ¨ç”Ÿæˆå§ï¼Ÿæˆ‘ä»¬ç›´æ¥ä¸€æ­¥åˆ°ä½ï¼Œåœ¨æ¯ä¸ªå›¾ç‰‡ä¸‹æ–¹æ–°å¢ä¸€ä¸ªmidjourney æç¤ºè¯åæ¨ã€å’ŒGPT4æç¤ºè¯åæ¨çš„æŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åè‡ªåŠ¨ç”Ÿæˆç”»é¢æç¤ºè¯ã€‚</p>

<p><img src="img/ca48df97e88d77538a51f682044d6b44.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CgvlbiwbKoYiZ6xiVGjc3R9dntd/"/></p>

<p>ç”Ÿæˆä¹‹åç‚¹å‡»ä¼šå¼¹å‡ºåæ¨å‡ºæ¥çš„æç¤ºè¯</p>
<p>è¿™é‡Œæˆ‘ä»¬å¦‚æœè‡ªå·±åœ¨discordè®¢é˜…äº†mjï¼Œå¯ä»¥è‡ªå·±ç›´æ¥é€†å‘ï¼Œé€†å‘çš„è¯ä¹Ÿä¸ç”¨é€ è½®å­ï¼Œç›´æ¥ç”¨ä¸‹é¢è¿™äº›å¼€æºçš„æ”¹æ”¹å°±è¡Œï¼š</p>
<p>https://github.com/yokonsan/midjourney-api</p>
<p>https://github.com/erictik/midjourney-api</p>
<p>https://github.com/novicezk/midjourney-proxy</p>

<p>å½“ç„¶äº†å¦‚æœä½ å¯¹ä¸Šé¢è¿™äº›ä¸æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æŒ‰é‡ä»˜è´¹APIï¼Œæ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ç¬¬ä¸‰æ–¹çš„è¯åæ¨æç¤ºè¯å¤§æ¦‚6åˆ†é’±ä¸€å¼ ï¼Œä½¿ç”¨4oå¤§æ¦‚å‡ å˜ä¸€å¼ ï¼Œæ¥è¿‘å…è´¹ï¼Œæ ¹æ®è‡ªå·±å®é™…æƒ…å†µæ¥å°±è¡Œäº†ã€‚</p>

<p>MJ æˆ‘ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªä¸­è½¬ç«™çš„APIï¼Œä¸ºäº†é¿å…å¹¿å‘Šå«Œç–‘æˆ‘å°±ä¸æ”¾åœ°å€äº†ï¼Œå¤§å®¶åœ¨è°·æ­Œæœä¸€ä¸‹ midjourney apiï¼Œæˆ–è€…æ‰¾ä¸€ä¸ªèšåˆç±»APIè½¬å‘ç«™ç‚¹ï¼Œç±»ä¼¼çš„ä¸­è½¬æ¥å£å¤ªå¤šäº†ï¼Œè‡ªå·±å¯¹æ¯”ä¹‹åæ‰¾ä¸ªä¾¿å®œçš„å°±è¡Œã€‚</p>

<p>åŠ å…¥mjæˆ–è€…GPTåæ¨ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ»‘åœ°æ‹¿åˆ°å›¾ç‰‡æç¤ºè¯ï¼Œæˆ‘ä»¬å¯ä»¥å†åŠ ä¸ªæŒ‰é’®ï¼Œå¯ä»¥ä¸€é”®æ·»åŠ åˆ°è§†é¢‘è‰ç¨¿ï¼Œæ³¨æ„æ·»åŠ è‰ç¨¿çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªé€»è¾‘ï¼Œä»¥å½“å‰çš„è§†é¢‘æ ‡é¢˜+titleä½œä¸ºå”¯ä¸€é”®åˆ›å»ºæ–°è‰ç¨¿ï¼Œè¿™æ ·åç»­æ‰€æœ‰çš„è§†é¢‘æç¤ºè¯éƒ½å¯ä»¥åŠ åˆ°åŒä¸€ä¸ªè‰ç¨¿ä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒæ•´å¯¼å‡ºã€‚</p>
<p><img src="img/842ec942b27c4519ca813d44a365cc24.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/GBXDbdn7woVUYXxdxFfcvPsBnHc/"/></p>

<h2>åˆ›æ„å¾®è°ƒ</h2>

<p>æˆ‘ä»¬æ‹¿åˆ°äº†è§†é¢‘ä¸­æ‰€æœ‰ä¸åŒåœºæ™¯çš„å›¾ç‰‡æç¤ºè¯å¹¶ä¸”å¯¼å…¥åˆ°äº†è§†é¢‘è‰ç¨¿ä¸­çš„åˆ†é•œåˆ—è¡¨ï¼Œè¿™é‡Œå…¶å®æœ‰æ—¶å€™å¯èƒ½å¯¹åæ¨çš„æç¤ºè¯åšä¸€äº›ä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠåˆ—è¡¨æ¸²æŸ“æ”¹æˆåŒå‡»è¾“å…¥ä¿®æ”¹ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨AIå‘æŒ¥æƒ³è±¡åŠ›è¿›è¡Œæ‰©å±•åŒç±»å‹æç¤ºè¯ã€‚æœ¬æ¥æƒ³ç€å†å†™ä¸ªæ–¹æ³•å¤šç”Ÿæˆå‡ ä¸ªåˆ›æ„æ¥ç€ï¼Œä½†æ˜¯è½¬å¿µä¸€æƒ³ï¼Œç°åœ¨ä¸æ˜¯æœ‰çš„æ˜¯æ’ä»¶å—ï¼Œæ¯”å¦‚monica, sider aiç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®monica çš„å¿«æ·æç¤ºè¯ï¼Œç„¶åç›´æ¥é€‰ä¸­æç¤ºè¯è¿›è¡ŒåŒç±»æ‰©å±•ï¼Œç‚¹å‡»å°±å¯ä»¥ç”Ÿæˆæç¤ºè¯äº†ã€‚</p>
<p><img src="img/5db9fd07711d4fb08f8c4ac2aa660c47.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/AZzqbAdGhoB3Gcx0kXwcTFblnIM/"/></p>

<p><img src="img/f771c6b832d21f97270c5a448a592a5f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/WkSobERnLoNxZ4xh1RPcikxmnZd/"/></p>
<p>æç¤ºè¯ç”Ÿæˆåå¦‚æœæ»¡æ„ç›´æ¥ç‚¹å‡»æ’å…¥ï¼Œç„¶åè‡ªåŠ¨ä¿å­˜</p>
<p><img src="img/e04976f024b2de138645ed6c3913e1f2.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VC57bneljoeTEtxEqFGc1HTYnrd/"/></p>

<p>å½“ç„¶äº†è¿™ç§æ–¹æ³•çš„ç¼ºé™·å°±æ˜¯æ²¡æœ‰åŠæ³•æ‰¹é‡ç”Ÿæˆï¼Œä¸è¿‡ä¹Ÿå¥½è§£å†³ï¼Œæˆ‘ä»¬å†™ä¸ªåå°è„šæœ¬ï¼Œä¸€æ¬¡æ€§æ ¹æ®å½“å‰æç¤ºè¯ç”Ÿæˆåæ¡ç›¸ä¼¼æˆ–æ‰©å±•åˆ›æ„å°±è¡Œäº†ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä¹Ÿæ²¡å¿…è¦ï¼Œç›®å‰å¤Ÿç”¨äº†.</p>

<p>æˆ‘ä»¬ç‚¹å‡»æç¤ºè¯åæ¨ä¹‹åï¼Œç¨åå°±ä¼šçœ‹åˆ°mjç”Ÿæˆçš„æç¤ºè¯äº†ï¼Œé»˜è®¤æ˜¯4ä¸ªï¼Œæˆ‘ä»¬åŠ ä¸€ä¸ªä¸€é”®ç”Ÿæˆå›¾ç‰‡è§†é¢‘è‰ç¨¿ã€‚ç‚¹å‡»ä¹‹åä»¥å½“å‰è§†é¢‘çš„videoidä¸ºæ ‡é¢˜è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé¡¹ç›®å¹¶ä¸”æŠŠå››ä¸ªæç¤ºè¯è¿›è¡Œæ‹†åˆ†ï¼Œè¿™æ—¶å€™å‘ç°å·²ç»è·³è½¬åˆ°åˆ†é•œé¡µé¢äº†ï¼Œè¿™é‡Œå›¾ç‰‡ç”Ÿæˆæˆ‘ä½¿ç”¨çš„æ˜¯æœ¬åœ°çš„fluxï¼Œæ¯•ç«Ÿä¾¿å®œï¼Œä¸»æ‰“çš„å°±æ˜¯ä¸æƒ³èŠ±çš„é’±ä¸€åˆ†ä¹Ÿä¸æƒ³èŠ±ã€‚ï¼ˆæç¤ºè¯åæ¨æœ¬åœ°ä¹Ÿèƒ½å®ç°ï¼Œä½†æ˜¯æ•ˆæœå¯èƒ½å·®ç‚¹ï¼‰æˆ‘ä»¬çœ‹åˆ°å›¾ç‰‡å·²ç»è‡ªåŠ¨ç”Ÿæˆäº†ï¼Œä½†æ˜¯å› ä¸ºæ˜¯mjåæ¨ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰è§†é¢‘æç¤ºè¯çš„ï¼Œé‚£å’‹åŠï¼Ÿåªèƒ½æ–°å¢ä¸€ä¸ªåŠŸèƒ½äº†ï¼Œè·å–åæ¨æç¤ºè¯åè‡ªåŠ¨ç”Ÿæˆè§†é¢‘æç¤ºè¯ã€‚</p>
<p><img src="img/eba5884e29dedb96ccc95cff4a9a2620.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LpjIb6T8Rojw7IxlndlckSJOnKe/"/></p>

<h2>Flux comfy å·¥ä½œæµå›¾ç‰‡ç”Ÿæˆ</h2>

<p>å¤§æ‰¹é‡ç”Ÿæˆå›¾ç‰‡çš„è¯MJæˆæœ¬è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ç›´æ¥æœ¬åœ°flux+comfyï¼Œç”Ÿæˆå‡ åƒå¼ ä¹Ÿä¸ç”¨èŠ±ä¸€åˆ†é’±ï¼Œæ•ˆæœèƒ½åˆ°8æˆã€‚</p>

<p>ä¸€å¼€å§‹æˆ‘çš„éœ€æ±‚å…¶å®æ˜¯æˆ‘æƒ³æ ¹æ®ä¸åŒçš„å‰§æƒ…å’Œèµ›é“é€‰æ‹©ä¸åŒçš„å·¥ä½œæµç”Ÿæˆå›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘åœ¨è‰ç¨¿é€‰é¡¹ä¸­åŠ äº†è‡ªå·±åšçš„å‡ ä¸ªcomfy å·¥ä½œæµï¼Œæ¯ä¸ªå·¥ä½œæµä¸­çš„lora å’Œ å·¥ä½œæµéƒ½ä¸åŒï¼Œè¿™æ ·å°±å¯ä»¥ä¸åŒèµ›é“ä½¿ç”¨ä¸åŒå·¥ä½œæµï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªè§†é¢‘å¾®è°ƒé£æ ¼ã€‚</p>

<p>è¿™æ ·åšçš„å‰ææ˜¯æˆ‘è¦è‡ªå»ºä¸€ä¸ªå·¥ä½œæµç®¡ç†ä¸­å¿ƒï¼Œå¹¶ä¸”ä¸å›¾ç‰‡ç”Ÿæˆè¿›è¡Œä¸²è”ã€‚è¿™æ˜¯å½“æ—¶comfy å·¥ä½œæµçš„cursor promptï¼Œä¸»è¦æ˜¯åˆ›å»ºäº†ä¸€ä¸ªcomfy ç®¡ç†ä¸­å¿ƒï¼Œæ–¹ä¾¿å¤åˆ»ä¸åŒèµ›é“çš„è§†é¢‘å’Œé£æ ¼ã€‚åœ¨é¡µé¢ä¸Šå¯ä»¥æ›´æ–¹ä¾¿çš„æŸ¥çœ‹å’ŒéªŒè¯å·¥ä½œæµã€‚</p>

<p><img src="img/bf19f321538ec252d3508bf16dfb0753.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/W7cabW0IeoaC5LxegTRcBcdKnuh/"/></p>
<p><img src="img/17784fe6066252b7ec2ee146dc995389.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/R6yLbhq83ou04hxzah7caK6Cnzh/"/></p>
<p><img src="img/a9d7dc023ddd71de5c7f3690f7a11705.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/GIRmbVX3voDhahxG7yxcNEcSnDh/"/></p>

<p>ä¸Šé¢å·¥ä½œæµç®¡ç†å®Œæˆåæˆ‘ä»¬è¦å¯¼å…¥åˆ°æˆ‘ä»¬çš„å·¥ä½œæµï¼Œæ‰“å¼€comfyuiï¼Œç›´æ¥ç‚¹å‡»ä¿å­˜APIï¼Œä¿å­˜è¿™ä¸ªå·¥ä½œæµjsonï¼Œåé¢å°±å¯ä»¥å¯¼å…¥åˆ°æˆ‘ä»¬è‡ªå·±çš„å·¥ä½œæµåº“ä¸­ï¼Œæ–¹ä¾¿åœ¨å„ä¸ªèŠ‚ç‚¹ä½¿ç”¨äº†ã€‚</p>

<p><img src="img/09be9133333b610b89c66500d4a98403.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/YSDab6lexoG3zJxTxQgcvsjxnTf/"/></p>

<p>å¦‚æœå¯¹comfyä¸ç†Ÿæ‚‰çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å» libart æ ¹æ®éœ€æ±‚ä¸‹è½½ä¸€ä¸ªé«˜èµçš„å·¥ä½œæµç›´æ¥å¯¼å…¥ã€‚</p>
<p>https://www.liblib.art/</p>
<p><img src="img/b3b2ce45b8235d25495ae22cbaf5bd3d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PxagbEm5Ao9Dn3xz348c8JgSn4d/"/></p>


<p>å¯¼å…¥è‡ªå·±çš„comfy å·¥ä½œæµä¹‹åæˆ‘ä»¬åœ¨åˆ›å»ºæ–°è§†é¢‘è‰ç¨¿çš„æ—¶å€™å°±å¯ä»¥é€‰æ‹©é£æ ¼äº†ã€‚è¿™æ ·åœ¨å¤åˆ»è§†é¢‘çš„æ—¶å€™å¯ä»¥èµ°ä¸åŒçš„å·¥ä½œæµï¼Œå·¥ä½œæµçš„è‡ªå®šä¹‰æ€§å°±å¾ˆå¼ºäº†ï¼Œèƒ½å®Œæˆæ›´å¤šMJåšä¸åˆ°çš„äº‹æƒ…ã€‚</p>

<p><img src="img/49813b65638f246e4abcb331f01af38a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/SfwEbAPHOoceUIxc26gcXjX1nfg/"/></p>

<h2>MJ å›¾ç‰‡ç”Ÿæˆ</h2>
<p>åœ¨ä¸æ–­åœ°ç”Ÿæˆå›¾ç‰‡çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç¡®å®å¯ä»¥çœ‹åˆ°comfy å·¥ä½œæµå®šåˆ¶æ€§æ›´å¼ºçš„ï¼Œä½†æ˜¯flux+comfy é—¨æ§›ç¡®å®å¤ªé«˜äº†ï¼Œå¤§éƒ¨åˆ†äººå¾ˆéš¾æå®šï¼Œå†åŠ ä¸Šå¾ˆå¤šæ—¶å€™MJç”Ÿæˆçš„å›¾ç‰‡å®¡ç¾ç¡®å®æ›´å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨MJå»ç”ŸæˆåŸå§‹ç´ æã€‚</p>

<p>MJ æˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥å…¨è‡ªåŠ¨ï¼Œæ¯”å¦‚é€†å‘æˆ–è€…è´­ä¹°ç¬¬ä¸‰æ–¹APIï¼Œåˆšåˆšä¸Šé¢ä¹Ÿè¯´åˆ°äº†ï¼Œä½†æ˜¯è¿™ç§æŠ€æœ¯é—¨æ§›ç¨å¾®æœ‰ç‚¹é«˜ä¹Ÿæœ‰ç‚¹éº»çƒ¦ï¼Œä¸‹é¢è¿™ç§æ–¹å¼æˆ‘ç§°ä¸ºåŠè‡ªåŠ¨ï¼Œæ˜¯æœ€åˆæˆ‘åœ¨éªŒè¯SOPæ—¶å€™å†™çš„ä¸€ä¸ªå°è„šæœ¬ã€‚</p>

<p>å¤§è‡´æ˜¯æˆ‘åœ¨discordé¡µé¢æ³¨å…¥äº†ä¸€ä¸ªæŒ‰é’® â€œç´ ææ”¶é›†â€ï¼Œç‚¹å‡»ä¹‹åè‡ªåŠ¨ä¼šæŠŠæˆ‘ä»¬ç”Ÿæˆçš„å›¾ç‰‡ä¿å­˜åˆ°æˆ‘çš„è§†é¢‘åˆ†é•œå›¾é‡Œç›´æ¥ç”Ÿæˆè§†é¢‘äº†ã€‚è¿™æ ·å°±ä¸éœ€è¦æˆ‘å…ˆä¸‹è½½åˆ°æœ¬åœ°äº†ï¼Œå¯ä»¥ç»Ÿä¸€åœ¨ç´ æä¸­å¿ƒè¿›è¡Œç®¡ç†ã€‚</p>

<p>æ¯”å¦‚ç¬¬ä¸€ç‰ˆï¼Œæˆ‘åœ¨discordç”Ÿæˆçš„æ¯ä¸ªå›¾ç‰‡ä¸Šé¢éƒ½åŠ äº†ä¸€ä¸ªâ€œæ”¶é›†â€ æŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åå›¾ç‰‡è‡ªåŠ¨æ”¾å…¥ç´ æåº“è¿›å…¥è§†é¢‘ç”Ÿæˆç¯èŠ‚ã€‚</p>
<p><img src="img/7ae0e0ef55a8cc6c48c2270c338cb311.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Hrf6bKaFzoK1shxPqpGcmOdon6q/"/></p>
<p><img src="img/d8e8497abe6087f3fcc5eed77f817abb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/FGBKbSwysocANex5mCacjFdtncg/"/></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre>// ==UserScript==
// @name         Discord Image Collector
// @namespace    http://tampermonkey.net/
// @version      0.2
// @description  Add collect button to Discord images
// @author       Your name
// @match        https://discord.com/*
// @grant        GM_addStyle
// @grant        GM_xmlhttpRequest
// ==/UserScript==

(function() {
    'use strict';

    // æ·»åŠ æŒ‰é’®æ ·å¼
    GM_addStyle(`
        .collect-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #7289da;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            z-index: 9999;
            opacity: 0.8;
        }
        .collect-btn:hover {
            opacity: 1;
        }
    `);

    // ç›‘å¬DOMå˜åŒ–
    const observer = new MutationObserver((mutations) =&gt; {
        mutations.forEach((mutation) =&gt; {
            mutation.addedNodes.forEach((node) =&gt; {
                if (node.nodeType === 1) {
                    processImages(node);
                }
            });
        });
    });

    // å¤„ç†å›¾ç‰‡
    function processImages(container) {
        // æŸ¥æ‰¾æ‰€æœ‰å›¾ç‰‡å®¹å™¨
        const imageContainers = container.querySelectorAll('.imageContainer_cf58b5:not([data-collector-added])');

        imageContainers.forEach(container =&gt; {
            // æ ‡è®°å®¹å™¨å·²å¤„ç†
            container.setAttribute('data-collector-added', 'true');

            // æŸ¥æ‰¾åŸå§‹é“¾æ¥
            const originalLink = container.querySelector('.originalLink_d4597d');
            if (!originalLink) return;

            // è·å–å®Œæ•´çš„å›¾ç‰‡URLï¼ˆåŒ…æ‹¬æŸ¥è¯¢å‚æ•°ï¼‰
            const imageUrl = originalLink.href;
            if (!imageUrl) return;

            // åˆ›å»ºæ”¶é›†æŒ‰é’®
            const collectBtn = document.createElement('button');
            collectBtn.className = 'collect-btn';
            collectBtn.textContent = 'æ”¶é›†';

            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            collectBtn.addEventListener('click', (e) =&gt; {
                e.preventDefault();
                e.stopPropagation();

                // å‘é€å®Œæ•´URLåˆ°æœ¬åœ°æœåŠ¡å™¨
                GM_xmlhttpRequest({
                    method: 'POST',
                    url: 'http://localhost:8001/material/collect',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    data: JSON.stringify({ url: imageUrl }),
                    onload: function(response) {
                        if (response.status === 200) {
                            collectBtn.textContent = 'å·²æ”¶é›†';
                            collectBtn.style.backgroundColor = '#43b581';
                            setTimeout(() =&gt; {
                                collectBtn.textContent = 'æ”¶é›†';
                                collectBtn.style.backgroundColor = '#7289da';
                            }, 2000);
                        } else {
                            collectBtn.textContent = 'å¤±è´¥';
                            collectBtn.style.backgroundColor = '#f04747';
                            setTimeout(() =&gt; {
                                collectBtn.textContent = 'æ”¶é›†';
                                collectBtn.style.backgroundColor = '#7289da';
                            }, 2000);
                        }
                    },
                    onerror: function() {
                        collectBtn.textContent = 'é”™è¯¯';
                        collectBtn.style.backgroundColor = '#f04747';
                        setTimeout(() =&gt; {
                            collectBtn.textContent = 'æ”¶é›†';
                            collectBtn.style.backgroundColor = '#7289da';
                        }, 2000);
                    }
                });
            });

            // æ‰¾åˆ°å›¾ç‰‡åŒ…è£…å™¨å¹¶æ·»åŠ æŒ‰é’®
            const imageWrapper = container.querySelector('.loadingOverlay_d4597d');
            if (imageWrapper) {
                imageWrapper.appendChild(collectBtn);
            }
        });
    }

    // å¯åŠ¨è§‚å¯Ÿå™¨
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });

    // åˆå§‹å¤„ç†å·²å­˜åœ¨çš„å›¾ç‰‡
    processImages(document.body);
})();</pre>
<p>è¿™é‡Œåå°çš„8081æ˜¯æˆ‘ä»¬çš„ç´ æä¸­å¿ƒçš„æ¥å£ï¼Œè¿™é‡Œä¹Ÿç›´æ¥è®©claudeç”Ÿæˆå³å¯ï¼Œå¾ˆç®€å•ï¼Œæ²¡å•¥éš¾å¾—ã€‚</p>
<p><img src="img/45e1f4a0e9cdb4338eaf5c574e2f7a70.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RxbxbZIyUoPwi6xYZMYcOWMmnPg/"/></p>
<p>åæ¥å‘ç°ä¸Šåˆšæ‰é‚£ç§æ–¹å¼åªä¿å­˜äº†å›¾ç‰‡ï¼Œæˆ‘è¿˜æƒ³è¦åŸå§‹çš„å›¾ç‰‡ç”Ÿæˆæç¤ºè¯ï¼Œä¸‹é¢æ˜¯ä¼˜åŒ–ç‰ˆæœ¬çš„promptï¼š</p>
<p>è¯·åœ¨discord çš„midjourneyé¢‘é“çš„å›¾ç‰‡ç”Ÿæˆå…ƒç´ æ¡†æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œåç§°å«åšæ·»åŠ åˆ°ç´ æåº“ã€‚éœ€è¦å®šä½çš„å®¹å™¨ä¸ºï¼š</p><div class="message_d5deea cozyMessage_d5deea mentioned_d5deea groupStart_d5deea wrapper_f9f2ca cozy_f9f2ca zalgo_f9f2ca hasReply_f9f2ca" role="article" data-list-item-id="chat-messages___chat-messages-1305358689418612738-1306634271406162032" tabindex="-1" aria-setsize="-1" aria-roledescription="&#x6D88;&#x606F;" aria-labelledby="message-reply-context-1306634271406162032 uid_1 message-content-1306634271406162032 message-accessories-1306634271406162032 uid_2 message-timestamp-1306634271406162032">ï¼Œå…¶ä¸­æ ·æŒ‰é’®å¼å¦‚ï¼š<button role="button" type="button" class="button_dd4f85 lookFilled_dd4f85 colorPrimary_dd4f85 sizeSmall_dd4f85 grow_dd4f85"><div class="contents_dd4f85"><div class="content_acadc1" aria-hidden="false"><img class="emoji textEmoji_acadc1" data-type="emoji" data-name="ğŸ”" src="/assets/a7ffe69527e77400ae0c.svg" alt="ğŸ”" draggable="false"/><div class="label_acadc1">Zoom Out 2x</div></div></div></button>ï¼Œè¯·å¸®æˆ‘ä½¿ç”¨æ²¹çŒ´è„šæœ¬å®ç°
<p>è¿™æ ·å°±æ”¹ä¸ºåœ¨å›¾ç‰‡ä¸‹é¢æ˜¾ç¤ºäº†ä¸€ä¸ªâ€œæ·»åŠ åˆ°ç´ æåº“â€ æŒ‰é’®äº†ï¼Œæˆ‘ä»¬åªè¦ç‚¹å‡»ä¸€ä¸‹ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæ–°å¢åˆ°æœ€æ–°è§†é¢‘è‰ç¨¿çš„åˆ†é•œé¡µé¢ã€‚</p>
<p><img src="img/8995277d060c12d8f730063415db7250.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CQEqbgsqfoCzfRxZTIFcBHZdnrb/"/></p>
<p>æˆ‘ä»¬æ‰“å¼€æˆ‘ä»¬è§†é¢‘è‰ç¨¿çš„åˆ†é•œé¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ç°åˆšåˆšmjç”Ÿæˆçš„å›¾ç‰‡ç´ æå’Œæç¤ºè¯å·²ç»èƒ½è‡ªåŠ¨æ·»åŠ åˆ°è‰ç¨¿ç®±äº†ã€‚</p>
<p><img src="img/616ec91d3eacf985eb895c018da4f72d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XDYpbcY0ZofUEExL26ncBeM2nxg/"/></p>

<h2>è§†é¢‘ç”Ÿæˆä¸å‰ªè¾‘</h2>
<p>OKï¼Œåˆ°è¿™å°±æ˜¯åé¢çš„è§†é¢‘ç”Ÿæˆäº†ã€‚</p>

<p>é¦–å…ˆæ˜¯æŠ›å¼ƒå„ç§å½±åˆ€æ–¹æ¡ˆï¼Œå½±åˆ€è¿™ç§ä¸œè¥¿å¥”ä¸”é‡ï¼Œå…³é”®æ—¶ä½ è®©ä»–24å°æ—¶è·‘ä»–è¿˜å¶å°”ä¼šå¡ä¸€ä¸‹åœä¸€ä¸‹ï¼Œè¿˜è¦äººå…³æ³¨ï¼Œæˆ‘ä¸æƒ³æŠŠæ—¶é—´æµªè´¹åœ¨è¿™ç§åœ°æ–¹ã€‚æ‰€ä»¥è¿™é‡Œç›´æ¥ä½¿ç”¨PythonåŸç”Ÿå®ç°ã€‚</p>

<p>é¦–å…ˆæ˜¯å³æ¢¦çš„è‡ªåŠ¨åŒ–</p>

<h3>å³æ¢¦</h3>
<p>è‡ªåŠ¨åŒ–æµç¨‹å¾ˆç®€å•ï¼Œæ ¸å¿ƒä»£ç å°±æ˜¯ä¸‹é¢è¿™ä¸ª</p>

<pre>import asyncio
import logging
import sys
import re
import traceback
from typing import Optional, List
from playwright.async_api import Page, async_playwright
from bit_api import BitBrowser

class JiMengClient:
    """å³æ¢¦è§†é¢‘ç”Ÿæˆå®¢æˆ·ç«¯"""
    def __init__(self):
        self.logger = logging.getLogger(__name__)
        self.page: Optional[Page] = None 
        self.playwright = None
        self.browser = None

    async def initialize(self, browser_ws: str) -&gt; None:
        """åˆå§‹åŒ–Playwrightæµè§ˆå™¨"""
        try:
            self.logger.info(f"åˆå§‹åŒ– Playwright, wsåœ°å€: {browser_ws}")
            self.playwright = await async_playwright().start()
            
            self.browser = await self.playwright.chromium.connect_over_cdp(
                browser_ws,
                timeout=30000
            )
            
            default_context = self.browser.contexts[0]
            self.page = await default_context.new_page()
            self.logger.info("åˆå§‹åŒ–å®Œæˆ")
            
        except Exception as e:
            error_msg = f"åˆå§‹åŒ–å¤±è´¥: {str(e)}\n{traceback.format_exc()}"
            self.logger.error(error_msg)
            raise Exception(error_msg)

    async def close(self) -&gt; None:
        """å…³é—­æµè§ˆå™¨èµ„æº"""
        try:
            if self.page:
                await self.page.close()
            if self.browser:
                await self.browser.close()
            if self.playwright:
                await self.playwright.stop()
        except Exception as e:
            self.logger.error(f"å…³é—­èµ„æºæ—¶å‡ºé”™: {e}")
async def generate_video(ws_address: str, prompt: str, image_path: str) -&gt; Optional[str]:
    """ç”Ÿæˆè§†é¢‘å¹¶è¿”å›è§†é¢‘ID"""
    client = None
    video_id = None
    
    try:
        client = JiMengClient()
        await client.initialize(ws_address)
        
        await client.page.goto("https://jimeng.jianying.com/ai-tool/video/generate", timeout=36000)
        await asyncio.sleep(2)

        if image_path:
            file_input = await client.page.wait_for_selector(
                'input[type="file"][accept="image/jpeg,image/jpg,image/png,image/bmp,image/webp,.jpeg,.jpg,.png,.bmp,.webp"]',
                state='attached'
            )
            await file_input.set_input_files(image_path)
            await asyncio.sleep(5)

        # å¡«å†™æç¤ºè¯
        textarea = await client.page.wait_for_selector('textarea.lv-textarea[class*="input-"]')
        await textarea.fill(prompt)
        await asyncio.sleep(2)

        # ç­‰å¾…ç”Ÿæˆæ¥å£å“åº”
        response_future = client.page.wait_for_response(
            lambda response: "mweb/v1/generate_video" in response.url
        )
        
        # ç‚¹å‡»ç”ŸæˆæŒ‰é’®
        generate_button = await client.page.wait_for_selector('div.mweb-button-default[class*="mwebButton-"][class*="generateButton-"]')
        await generate_button.click()
        
        # ç­‰å¾…å“åº”
        response = await response_future
        response_data = await response.json()
        
        if response_data.get('data', {}).get('aigc_data'):
            flow = response_data['data']['aigc_data']['task']['process_flows'][0]
            video_id = flow.get("history_id", "")
            logging.info(f"è·å–è§†é¢‘ID: {video_id}")
        
        return video_id
        
    except Exception as e:
        logging.error(f"ç”Ÿæˆè§†é¢‘æ—¶å‡ºé”™: {e}")
        return None
    finally:
        if client:
            await client.close()


async def create_video(image_path: str, video_prompt: str) -&gt; Optional[str]:
    """åˆ›å»ºè§†é¢‘ä¸»å‡½æ•°"""
    ws = "brwoser_socket_url"
    
    try:
        if sys.platform == 'win32':
            loop = asyncio.ProactorEventLoop()
            asyncio.set_event_loop(loop)
        return await generate_video(ws, video_prompt, image_path)
    except Exception as e:
        logging.error(f"åˆ›å»ºè§†é¢‘å¤±è´¥: {e}")
        return None

if __name__ == '__main__':
    logging.basicConfig(level=logging.INFO)
    image_path = r"F:\shortvideos\images\comfyui\2024-11-13\ComfyUI_00537_.png"
    prompt = "move forward"
    asyncio.run(create_video(image_path, prompt))
</pre>

<p>è¿™é‡Œæ³¨æ„æˆ‘ä»¬ä¸€å®šè¦æ‹¿åˆ°å¯¹åº”çš„video_idç”¨äºæœ¬åœ°çš„åˆ†é•œå…³è”å’Œåç»­çš„è§†é¢‘ä¸‹è½½ï¼Œå†ç‚¹å‡»ç”Ÿæˆè§†é¢‘çš„æ—¶å€™æˆ‘ä»¬ç›´æ¥ç›‘å¬æ¥å£https://jimeng.jianying.com/mweb/v1/generate_video ç­‰å¾…æäº¤æˆåŠŸï¼Œç„¶åæ‹¿åˆ°data.get('aigc_data',{}).get('task',{}).get('process_flows',{}).get('history_id',{})ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬åé¢è¦å’Œæœ¬åœ°å…³è”çš„å”¯ä¸€å€¼ï¼Œæ ¹æ®è¿™ä¸ªIDå°±å¯ä»¥è·å–åˆ°æ— æ°´å°è§†é¢‘åœ°å€ï¼Œå¹¶ä¸”å…³è”æœ¬åœ°çš„åˆ†é•œå›¾ç‰‡ã€‚</p>

<p>ä¸å¾—ä¸è¯´ä¸€ä¸‹å³æ¢¦ç”Ÿæˆçš„æ•ˆç‡çœŸçš„å¾ˆé«˜ï¼ï¼å…è´¹ç‰ˆæœ¬å¤§æ¦‚åå‡ ç§’ä¹Ÿèƒ½ç”Ÿæˆä¸€ä¸ªè§†é¢‘ï¼Œå’Œå¯çµå…è´¹ç‰ˆæ¯”èµ·æ¥çœŸçš„å¾ˆè‰¯å¿ƒã€‚å¦å¤–æˆ‘ä»¬ç›´æ¥é€šè¿‡æºåœ°å€ä¸‹è½½åˆ°æ–¹å¼ä¸ä»…æ•ˆç‡é«˜ï¼Œè€Œä¸”å³ä½¿å…è´¹ç‰ˆä¹Ÿä¸ä¼šå¸¦æ°´å°ï¼Œè¿™ä¸ªæˆ‘åé¢å†™ä¸ªå³æ¢¦æ— æ°´å°ä¸‹è½½çš„æ²¹çŒ´è„šæœ¬æä¾›ç»™å¤§å®¶ã€‚</p>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬åªè¦ä½¿ç”¨cursor å†™ä¸€ä¸ªæ•°æ®æ˜ å°„ï¼Œä¿å­˜è‡ªå·±çš„æŒ‡çº¹æµè§ˆå™¨å’Œå³æ¢¦è´¦å·çš„å…³ç³»ã€å’Œä¿å­˜å›¾æ–‡æç¤ºè¯å’Œå³æ¢¦è´¦å·çš„å…³ç³»ï¼›è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°å¤šä¸ªè´¦å·çš„è°ƒåº¦ï¼Œ</p>

<p>æˆ‘ç›´æ¥ç”¨å¤šä¸ªå·å¼€äº†äº”ä¸ªæŒ‡çº¹æµè§ˆå™¨åŒæ­¥ç”Ÿæˆè§†é¢‘ï¼Œè¿™æ ·æ¯å¤©å¯ä»¥è–…ç§¯åˆ†å¤§æ¦‚ç”Ÿæˆ80æ¬¡å·¦å³çš„è§†é¢‘ç”Ÿæˆï¼Œå¯¹æˆ‘æ¥è¯´è¶³å¤Ÿäº†ï¼Œæ¯•ç«Ÿç°é˜¶æ®µæˆ‘ä¹Ÿæ²¡å‡ ä¸ªæ²¹ç®¡å·ï¼Œç”Ÿæˆè¿™ä¹ˆå¤šè§†é¢‘ä¹Ÿæ²¡å•¥ç”¨ã€‚å¦‚æœèƒ½æ‹¿åˆ°çš„å·å¤šï¼Œå¼€ä¸€ç™¾ä¸ªä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼ŒæŒ‰ç…§åˆšåˆšè¯´çš„æ–¹æ³•åšå¥½è°ƒåº¦å°±è¡Œã€‚</p>

<p>æ¯”å¦‚ä½ æœ‰50ä¸ªå³æ¢¦è´¦å·ï¼Œå¯ä»¥åŒæ—¶å¼€å¯10ä¸ªä½œä¸ºä¸€è½®è¿›è¡Œç”Ÿæˆï¼Œæ¯è½®æ¯ä¸ªè´¦å·æäº¤äº”ä¸ªä»»åŠ¡ï¼Œç­‰ç¬¬äº”è½®ç”Ÿæˆæäº¤ä¹‹åå†é¡ºåºä¸‹è½½å‰é¢çš„æ‰€æœ‰è§†é¢‘ä¿¡æ¯ï¼Œè¿™æ ·å¤§æ¦‚ä¸€å°æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆ10*5*5 = 250ä¸ªè§†é¢‘ã€‚ä¸€ä¸ªè´¦å·æ¯å¤©æœ‰å…è´¹çš„88ç§¯åˆ†ï¼Œå¯ä»¥ç”Ÿæˆ17ä¸ªå·¦å³è§†é¢‘ï¼Œæˆ‘ä»¬èµ°ä¸‰ä¸ªæ‰¹æ¬¡å°±å¯ä»¥ï¼Œç®—ä¸‹æ¥ä¸åˆ°3ä¸ªå°æ—¶å°±å¯ä»¥ç”Ÿæˆ250*3 = 750ä¸ªè§†é¢‘ç´ æï¼Œå‰©ä¸‹çš„å•3èµ°ä¸€è½®è¿™æ ·å°±å¯ä»¥æŠŠ17*50=850æ¡ç”Ÿæˆé¢åº¦ç”¨å®Œã€‚æŒ‰æŠ½å¡ç®—10ä¸ªè§†é¢‘ç´ æåˆæˆä¸€ä¸ªçŸ­è§†é¢‘çš„è¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”Ÿæˆ85ä¸ªè§†é¢‘ã€‚</p>

<p>è¿™æ ·å°±å®ç°äº†å…¨è‡ªåŠ¨çš„è§†é¢‘ç”Ÿæˆã€ä¸‹è½½å’Œåˆ†é•œå¤´çš„å…³è”ã€‚æˆ‘ä»¬é€‰å¥½å›¾ç‰‡ç´ æä¹‹åï¼Œéš”ä¸€ä¼šçœ‹ä¸‹åˆ†é•œåˆ—è¡¨ï¼Œæ‰€æœ‰çš„å›¾ç‰‡éƒ½æœ‰äº†å¯¹åº”çš„è§†é¢‘ã€‚</p>
<p><img src="img/d0bf968afe9bb4f8e020d69dc5d1b9bf.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/B60ibBRdko6XpOxVuXScesxMn5f/"/></p>
<p><img src="img/c928a0c0d85ece557f15f457e1989886.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Y6K9brXNKosctRx7hmvclKwAnZf/"/></p>

<p>å¦å¤–å†åˆ†äº«ä¸ªå³æ¢¦æ— æ°´å°ä¸‹è½½è„šæœ¬ï¼Œæˆ‘ä»¬çŸ¥é“å…è´¹ç‰ˆå³æ¢¦ä¸‹è½½æ˜¯æ— æ°´å°çš„ï¼Œæˆ‘å†™äº†ä¸ªæ²¹çŒ´è„šæœ¬ï¼Œç›´æ¥åœ¨è§†é¢‘å·¦ä¸Šè§’åŠ ä¸€ä¸ªâ€œæ— æ°´å°ä¸‹è½½â€ï¼Œç‚¹å‡»ä¸‹è½½ä¹‹åå°±æ˜¯æ— æ°´å°çš„è§†é¢‘äº†ï¼š</p>
<p><img src="img/78c30163dd6b9dc2bbb261ff8e85811b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/W3SKb5PzbodHZZxt3XvcmRXVnZd/"/></p>
<p><img src="img/ea2afcf0d4f76f5e10870b3865a8d0f8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Qx9xbd07XoC0uWxio2OcmmlXnC7/"/></p>
<p>è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre>// ==UserScript==
// @name         å³æ¢¦æ— æ°´å°ä¸‹è½½
// @namespace    http://tampermonkey.net/
// @version      2024-11-15
// @description  try to take over the world!
// @author       You
// @match        https://*.jianying.com/*
// @match        https://jimeng.jianying.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&amp;domain=jianying.com
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    // æ·»åŠ ä¸‹è½½æŒ‰é’®çš„æ ·å¼
    const style = document.createElement('style');
    style.textContent = `
        .custom-download-btn-wrapper {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 999999;
            pointer-events: auto;
        }
        .custom-download-btn {
            background: rgba(0, 0, 0, 0.75);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            pointer-events: auto;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s ease;
            backdrop-filter: blur(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        .custom-download-btn:hover {
            background: rgba(0, 0, 0, 0.85);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .custom-download-btn:active {
            transform: translateY(0);
        }
        .custom-download-btn.downloading {
            background: rgba(0, 0, 0, 0.6);
            cursor: not-allowed;
        }
        .custom-download-btn svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
    `;
    document.head.appendChild(style);

    // ä¸‹è½½å›¾æ ‡ SVG
    const downloadIcon = `
        <svg viewbox="0 0 24 24" width="16" height="16">
            <path d="M12 16l-5-5h3V4h4v7h3l-5 5zm-5 4h10v-2H7v2z"/>
        </svg>
    `;

    // åŠ è½½ä¸­å›¾æ ‡ SVG
    const loadingIcon = `
        <svg class="loading-spinner" viewbox="0 0 24 24" width="16" height="16">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
            <path d="M12 2v4c4.42 0 8 3.58 8 8h4c0-6.62-5.38-12-12-12z" fill="white"/>
        </svg>
    `;

    function addDownloadButton() {
        const videoContainers = document.querySelectorAll('.videoWrapper-yY21WT');

        videoContainers.forEach(container =&gt; {
            if (container.querySelector('.custom-download-btn-wrapper')) return;

            const video = container.querySelector('video');
            if (!video) return;

            const wrapper = document.createElement('div');
            wrapper.className = 'custom-download-btn-wrapper';

            const downloadBtn = document.createElement('button');
            downloadBtn.className = 'custom-download-btn';
            downloadBtn.innerHTML = `${downloadIcon}<span>æ— æ°´å°ä¸‹è½½</span>`;

            downloadBtn.onclick = async function(e) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();

                const videoUrl = video.src;
                if (!videoUrl) {
                    alert('æ— æ³•è·å–è§†é¢‘åœ°å€');
                    return;
                }

                try {
                    downloadBtn.classList.add('downloading');
                    downloadBtn.innerHTML = `${loadingIcon}<span>ä¸‹è½½ä¸­...</span>`;
                    downloadBtn.disabled = true;

                    const response = await fetch(videoUrl);
                    const blob = await response.blob();

                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `video_${Date.now()}.mp4`;
                    document.body.appendChild(a);
                    a.click();

                    window.URL.revokeObjectURL(url);
                    document.body.removeChild(a);
                } catch (error) {
                    console.error('ä¸‹è½½å¤±è´¥:', error);
                    alert('ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•');
                } finally {
                    downloadBtn.classList.remove('downloading');
                    downloadBtn.innerHTML = `${downloadIcon}<span>æ— æ°´å°ä¸‹è½½</span>`;
                    downloadBtn.disabled = false;
                }

                return false;
            };

            wrapper.appendChild(downloadBtn);

            const controlsContainer = container.querySelector('.videoCustomControlSlotWrapper-uFXNzG') || container;
            controlsContainer.appendChild(wrapper);
        });
    }

    function checkAndAddButton() {
        addDownloadButton();
        setTimeout(checkAndAddButton, 2000);
    }

    setTimeout(() =&gt; {
        checkAndAddButton();
    }, 1500);

    const observer = new MutationObserver(() =&gt; {
        addDownloadButton();
    });

    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
})();
</pre>
<h3>æµ·èºè‡ªåŠ¨åŒ–</h3>

<p>ä¸‹é¢å°±æ˜¯æµ·èºäº†ï¼Œå¤§åŒå°å¼‚ï¼Œæµ·èºæœ‰ä¸ªäº®ç‚¹ï¼Œå°±æ˜¯ç¬¬ä¸€å¤©ä»–æ˜¯ä¸é™é‡çš„ï¼Œç¾æ»‹æ»‹ã€‚æµ‹è¯•çš„æ—¶å€™æˆ‘åœ¨é—²é±¼ä¹°äº†ä¸ªVIPè´¦å·ï¼Œä½“éªŒä¸‹æ¥è§†é¢‘ç”Ÿæˆçš„æ•ˆæœæ¯”å³æ¢¦å¥½ä¸€ç‚¹ï¼Œä½†æ˜¯æˆæœ¬ä¹Ÿé«˜ï¼Œä½œä¸ºä¸€ä¸ªç›®å‰è¿˜æ²¡ä»æ²¹ç®¡æŒ£åˆ°é’±çš„äººæ¥è¯´ï¼Œä½“éªŒä¼šå‘˜è¿‡æœŸåè¿˜æ˜¯å…ˆä¸ç»­è´¹äº†ã€‚</p>

<p>æµ·èºçš„è‡ªåŠ¨åŒ–æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre>import asyncio
import logging
import traceback
from typing import Optional
from playwright.async_api import Page, async_playwright, Browser, Playwright

# å¸¸é‡é…ç½®
CONFIG = {
    'BASE_URL': "https://hailuoai.video/",
    'TIMEOUTS': {
        'VIDEO': 300,
        'PAGE': 36000,
        'NETWORK': 30000
    },
    'WAITS': {
        'INTERVAL': 2,
        'IMAGE_UPLOAD': 15
    }
}

class HailuoClient:
    """æµ·èºè§†é¢‘å®¢æˆ·ç«¯"""
    
    def __init__(self):
        self.logger = logging.getLogger(__name__)
        self.page = self.browser = self.playwright = None
        self.video_id = None
        self.video_generated_event = asyncio.Event()

    async def initialize(self, browser_ws: str) -&gt; None:
        """åˆå§‹åŒ–æµè§ˆå™¨è¿æ¥"""
        try:
            self.playwright = await async_playwright().start()
            self.browser = await self.playwright.chromium.connect_over_cdp(
                browser_ws,
                timeout=CONFIG['TIMEOUTS']['NETWORK']
            )
            self.page = await self.browser.contexts[0].new_page()
            await self._setup_network_listener()
        except Exception as e:
            await self.close()
            raise Exception(f"åˆå§‹åŒ–å¤±è´¥: {str(e)}")

    async def _setup_network_listener(self):
        """è®¾ç½®ç½‘ç»œç›‘å¬"""
        async def on_response(response):
            try:
                if "generate/video" in response.url:
                    data = await response.json()
                    if video_id := data.get('data', {}).get('id'):
                        self.video_id = video_id
                        self.video_generated_event.set()
            except Exception:
                pass
        self.page.on("response", on_response)

    async def check_queue_status(self) -&gt; bool:
        """æ£€æŸ¥é˜Ÿåˆ—çŠ¶æ€"""
        for selector in ['//*[contains(text(), "jobs in queue")]', 'text=/jobs in queue/']:
            try:
                if element := await self.page.wait_for_selector(selector, timeout=5000):
                    if text := await element.text_content():
                        return not any(int(n) &gt;= 5 for n in text.split() if n.isdigit())
            except Exception:
                continue
        return True

    async def generate_video(self, prompt: str, image_path: Optional[str] = None) -&gt; None:
        """ç”Ÿæˆè§†é¢‘"""
        await self.page.goto(CONFIG['BASE_URL'], timeout=CONFIG['TIMEOUTS']['PAGE'])
        await asyncio.sleep(CONFIG['WAITS']['INTERVAL'])
        
        # åˆ‡æ¢åˆ°Mineæ ‡ç­¾
        await (await self.page.wait_for_selector('div[role="tab"][aria-controls="rc-tabs-0-panel-mine"]')).click()
        
        if prompt == 'NO_PROMPT':
            return

        if not await self.check_queue_status():
            return

        # è¾“å…¥æç¤ºè¯å’Œä¸Šä¼ å›¾ç‰‡
        await (await self.page.wait_for_selector('textarea.ant-input.css-o72qen')).fill(prompt)
        
        if image_path:
            await self._upload_image(image_path)
            
        await (await self.page.wait_for_selector('div.create-btn-container div.create-btn')).click()
        
        try:
            await asyncio.wait_for(
                self.video_generated_event.wait(), 
                timeout=CONFIG['TIMEOUTS']['VIDEO']
            )
        except asyncio.TimeoutError:
            self.logger.error("è§†é¢‘ç”Ÿæˆè¶…æ—¶")

    async def _upload_image(self, image_path: str) -&gt; None:
        """ä¸Šä¼ å›¾ç‰‡"""
        await (await self.page.wait_for_selector('div.relative.cursor-pointer.group')).click()
        await asyncio.sleep(CONFIG['WAITS']['INTERVAL'])
        
        upload_btn = await self.page.wait_for_selector('div.ant-upload.ant-upload-select')
        async with self.page.expect_file_chooser() as fc:
            await upload_btn.click()
            await (await fc.value).set_files(image_path)
        await asyncio.sleep(CONFIG['WAITS']['IMAGE_UPLOAD'])

    async def close(self) -&gt; None:
        """å…³é—­èµ„æº"""
        for resource in [self.page, self.browser, self.playwright]:
            if resource:
                try:
                    await resource.close()
                except Exception:
                    pass
        self.page = self.browser = self.playwright = None

async def process_video(ws_address: str, prompt: str, image_path: Optional[str] = None) -&gt; Optional[str]:
    """å¤„ç†è§†é¢‘ç”Ÿæˆæµç¨‹"""
    client = HailuoClient()
    try:
        await client.initialize(ws_address)
        await client.generate_video(prompt, image_path)
        return client.video_id
    except Exception as e:
        logging.error(f"å¤„ç†å¤±è´¥: {e}")
        return None
    finally:
        await client.close()
    
if __name__ == '__main__':
    disable_resource_warnings()
    asyncio.run(hailuo_video(r"F:\shortvideos\images\comfyui\2024-11-10\1725888666.jpg","a colourful furry animal"))
</pre>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹åˆ°æ‰€æœ‰è§†é¢‘éƒ½å®Œæˆäº†ï¼Œè¿™é‡Œä¸ºäº†æ’åºæˆ‘åˆåŠ äº†ä¸ªæ’åºï¼Œæ–¹ä¾¿æ§åˆ¶è‡ªåŠ¨åŒ–å‰ªè¾‘æ—¶å€™çš„é¡ºåºã€‚</p>

<p>è§†é¢‘å‰ªè¾‘èµ°äº†ç‚¹å¼¯è·¯ï¼Œä¸€äº›ç®€å•è§†é¢‘çš„å‰ªè¾‘ï¼Œæ¯”å¦‚èŒå® å”±æ­Œè·³èˆèµ°ç§€è¿™ç§ï¼Œå…¶å®ä¹Ÿæ²¡å•¥å‰§æƒ…ï¼Œç”¨ä¸åˆ°å­—å¹•å’Œå„ç§ç‰¹æ•ˆï¼Œä½†æ˜¯æˆ‘ä¸€æ¥å°±é€‰æ‹©äº†å‰ªæ˜ è‡ªåŠ¨åŒ–ï¼Œå‰ªæ˜ æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œæ•´ä½“æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œå½±åˆ€è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå¥½åœ¨å‰ªæ˜ 6.0ç‰ˆæœ¬å‰æˆ‘ä»¬å¯ä»¥æ“ä½œdraft_content.json å’Œ draft_mate_info.jsonï¼Œè¿™ä¿©JSONä¸€ä¸ªæ§åˆ¶ç´ æåº“ï¼Œä¸€ä¸ªæ§åˆ¶æ—¶é—´çº¿ï¼Œåªè¦æ“ä½œè¿™ä¿©JSONå°±å¯ä»¥å®ç°è‡ªåŠ¨ç”Ÿæˆè‰ç¨¿ï¼Œæœ€åç”¨uiautomation è‡ªåŠ¨åŒ–å¯¼å‡ºè§†é¢‘å°±è¡Œäº†ã€‚ä½†æ˜¯åšåˆ°æœ€åæˆ‘çªç„¶å‘ç°ï¼Œæœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€äº†ï¼Œæˆ‘ç°åœ¨å°±æ˜¯æŠ„ä¸ªå¯¹æ ‡ï¼Œå¤åˆ»ä¸ªè§†é¢‘è€Œå·²ï¼Œä¹Ÿè¿˜æ²¡åŠ å‰§æƒ…å‘¢ï¼Œå°±ç›´æ¥è½¬å¤´ç”¨Pythonè‡ªå·±å†™ä¸€ä¸ªè§†é¢‘åˆæˆï¼Œå®ç°çš„åŠŸèƒ½åªè¦æœ‰ï¼šå¤šè§†é¢‘è‡ªåŠ¨æ‹¼æ¥ï¼ŒåŠ BGMã€éŸ³é‡æ·¡å…¥æ·¡å‡ºã€è£å‰ªå¯¼å‡ºå°±è¡Œäº†ï¼Œå‰ªæ˜ å°±ç•™ç€åé¢å‰§æƒ…å·æˆ–è€…æ›´åŠ å¤æ‚çš„å‰ªè¾‘çš„æ—¶å€™å†ç”¨å§ã€‚</p>

<p>è‡ªåŠ¨å‰ªè¾‘çš„æ ¸å¿ƒä»£ç å°±æ˜¯ä¸‹é¢è¿™ä¸ªäº†ï¼Œæ ¹æ®å‰é¢ç­›é€‰å¥½çš„è§†é¢‘è·¯å¾„å’Œè‰ç¨¿æŒ‡å®šçš„BGMï¼Œè‡ªåŠ¨å¯¼å‡ºåˆæˆå¥½çš„è§†é¢‘ï¼Œæ•ˆæœå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>
<pre>from dataclasses import dataclass
from typing import List, Optional
from pathlib import Path
import logging
from contextlib import contextmanager
from moviepy.editor import VideoFileClip, concatenate_videoclips, AudioFileClip, concatenate_audioclips

# é…ç½®æ—¥å¿—
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

class VideoProcessingError(Exception):
    """è§†é¢‘å¤„ç†ç›¸å…³çš„è‡ªå®šä¹‰å¼‚å¸¸"""
    pass

@dataclass
class VideoConfig:
    """è§†é¢‘å¤„ç†é…ç½®ç±»"""
    video_codec: str = 'libx264'
    audio_codec: str = 'aac'
    temp_audio: str = 'temp-audio.m4a'
    bgm_volume: float = 0.3

class VideoProcessor:
    """è§†é¢‘å¤„ç†å™¨ç±»"""
    
    def __init__(self, config: Optional[VideoConfig] = None):
        self.config = config or VideoConfig()
        self._clips = []
        
    @contextmanager
    def _manage_resources(self):
        """èµ„æºç®¡ç†å™¨ï¼Œç¡®ä¿æ‰€æœ‰clipéƒ½è¢«æ­£ç¡®å…³é—­"""
        try:
            yield
        finally:
            for clip in self._clips:
                try:
                    clip.close()
                except Exception as e:
                    logger.warning(f"å…³é—­clipæ—¶å‡ºé”™: {e}")
            self._clips.clear()

    def _load_video_clips(self, video_paths: List[Path]) -&gt; List[VideoFileClip]:
        """åŠ è½½è§†é¢‘ç‰‡æ®µ"""
        clips = []
        for path in video_paths:
            try:
                clip = VideoFileClip(str(path))
                clips.append(clip)
                self._clips.append(clip)
            except Exception as e:
                logger.error(f"åŠ è½½è§†é¢‘ {path} æ—¶å‡ºé”™: {e}")
        
        if not clips:
            raise VideoProcessingError("æ²¡æœ‰æœ‰æ•ˆçš„è§†é¢‘ç‰‡æ®µå¯ä»¥åˆå¹¶")
        return clips

    def _process_bgm(self, bgm_path: Path, video_duration: float) -&gt; Optional[AudioFileClip]:
        """å¤„ç†èƒŒæ™¯éŸ³ä¹"""
        if not bgm_path.exists():
            logger.warning(f"èƒŒæ™¯éŸ³ä¹æ–‡ä»¶ä¸å­˜åœ¨: {bgm_path}")
            return None

        try:
            bgm = AudioFileClip(str(bgm_path))
            self._clips.append(bgm)
            
            if video_duration &gt; bgm.duration:
                repeats = int(video_duration / bgm.duration) + 1
                extended_bgm = concatenate_audioclips([bgm] * repeats)
                bgm = extended_bgm.subclip(0, video_duration)
            else:
                bgm = bgm.subclip(0, video_duration)
            
            return bgm.volumex(self.config.bgm_volume)
        except Exception as e:
            logger.error(f"å¤„ç†èƒŒæ™¯éŸ³ä¹æ—¶å‡ºé”™: {e}")
            return None

    def merge_videos(self, 
                    video_paths: List[str], 
                    bgm_path: Optional[str], 
                    output_path: str) -&gt; bool:
        """
        åˆå¹¶å¤šä¸ªè§†é¢‘å¹¶æ·»åŠ èƒŒæ™¯éŸ³ä¹
        
        Args:
            video_paths: è§†é¢‘æ–‡ä»¶è·¯å¾„åˆ—è¡¨
            bgm_path: èƒŒæ™¯éŸ³ä¹æ–‡ä»¶è·¯å¾„
            output_path: è¾“å‡ºæ–‡ä»¶è·¯å¾„
            
        Returns:
            bool: å¤„ç†æ˜¯å¦æˆåŠŸ
        """
        try:
            with self._manage_resources():
                # è½¬æ¢è·¯å¾„
                video_paths = [Path(p) for p in video_paths]
                bgm_path = Path(bgm_path) if bgm_path else None
                output_path = Path(output_path)
                
                # åŠ è½½å¹¶åˆå¹¶è§†é¢‘
                clips = self._load_video_clips(video_paths)
                final_clip = concatenate_videoclips(clips)
                self._clips.append(final_clip)
                
                # å¤„ç†èƒŒæ™¯éŸ³ä¹
                if bgm_path:
                    bgm = self._process_bgm(bgm_path, final_clip.duration)
                    if bgm:
                        final_clip = final_clip.set_audio(bgm)
                
                # å¯¼å‡ºè§†é¢‘
                final_clip.write_videofile(
                    str(output_path),
                    codec=self.config.video_codec,
                    audio_codec=self.config.audio_codec,
                    temp_audiofile=self.config.temp_audio,
                    remove_temp=True
                )
                
                logger.info("è§†é¢‘åˆå¹¶æˆåŠŸ")
                return True
                
        except VideoProcessingError as e:
            logger.error(f"è§†é¢‘å¤„ç†é”™è¯¯: {e}")
        except Exception as e:
            logger.error(f"æœªé¢„æœŸçš„é”™è¯¯: {e}", exc_info=True)
        
        return False

def test_main():
    """ä¸»å‡½æ•°"""
    # ç¤ºä¾‹é…ç½®
    config = VideoConfig(
        video_codec='libx264',
        audio_codec='aac',
        temp_audio='temp-audio.m4a',
        bgm_volume=0.3
    )
    
    # è§†é¢‘å¤„ç†å™¨
    processor = VideoProcessor(config)
    
    # è§†é¢‘æ–‡ä»¶è·¯å¾„
    videos = [
        "C:\\Users\\pc\\Downloads\\19\\311590906934300676 (1).mp4",
        "C:\\Users\\pc\\Downloads\\19\\311590906934300676.mp4"
    ]
    
    # èƒŒæ™¯éŸ³ä¹è·¯å¾„
    bgm = ""
    
    # è¾“å‡ºæ–‡ä»¶è·¯å¾„
    output = "output.mp4"
    
    # æ‰§è¡Œåˆå¹¶
    success = processor.merge_videos(videos, bgm, output)
    if success:
        logger.info("è§†é¢‘åˆå¹¶å®Œæˆï¼")
    else:
        logger.error("è§†é¢‘åˆå¹¶å¤±è´¥ï¼")

if __name__ == "__main__":
    main()
</pre>

<p>è§†é¢‘å¯¼å‡ºå®Œäº†å°±æ˜¯å‘å¸ƒäº†ï¼Œå› ä¸ºæˆ‘åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™å°±é€‰æ‹©äº†è´¦å·ï¼Œè¿™é‡Œæ¯ä¸ªæµè§ˆå™¨æˆ‘ä¹Ÿç»‘å®šäº†å¯¹åº”çš„è°·æ­Œè´¦å·ï¼Œç†è®ºä¸Šæ˜¯æ— ä¸Šé™çš„ï¼Œåªè¦èƒ½ä¹°çš„èµ·IPï¼Œç»‘å®šä¸€åƒä¸ªè´¦å·ä¹Ÿè¡Œï¼Œå› ä¸ºæˆ‘å®æµ‹ä¸‹æ¥å‘ç°ï¼Œä¸Šä¼ ä¸€ä¸ªè§†é¢‘å¤–åŠ ç»Ÿè®¡ä¹Ÿå°±æ˜¯ä¸€ä¸¤åˆ†é’Ÿï¼ŒåŒæ—¶å¹¶è¡Œ10ä¸ªå¾ˆè½»æ¾ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸¤åƒä¸ªè´¦å·ä¹Ÿå°±æ˜¯ä¸€å°æ—¶å°±èƒ½å‘å®Œã€‚å½“ç„¶äº†æˆ‘ä»¬ä¹Ÿèƒ½ç”¨APIå‘å¸ƒï¼Œä½†æ˜¯è¿˜å¾—ç”³è¯·KEYï¼Œå†µä¸”æˆ‘ä¹Ÿä¸ç¡®å®šAPIå‘å¸ƒçš„ä¼šä¸ä¼šå¯¹æ¨èæƒé‡æœ‰å½±å“ï¼Œé‚£å°±ç›´æ¥ä»£ç å®ç°å§ï¼Œå®Œå…¨æ¨¡æ‹Ÿäººå·¥ï¼Œè¿™æ ·æ’é™¤ä¸€åˆ‡å› ç´ ï¼Œå¦‚æœè¿˜èµ·ä¸æ¥å·è¿˜å®¹æ˜“åšæ§åˆ¶å˜é‡æ’é™¤ã€‚</p>

<h1>å‰§æƒ…å·å¤åˆ»</h1>
<p>ç›®å‰æ•´ä½“åŠŸèƒ½å®ç°äº†ï¼Œä½†æ˜¯é‡ç‚¹è¿˜æ˜¯AIç”Ÿæˆçš„å¯¹æ ‡è§†é¢‘ï¼Œæ²¡æœ‰èŠ±ç²¾åŠ›åœ¨å‰§æƒ…è¿™ã€‚å¦‚æœæˆ‘å“ªä¸€å¤©æˆ‘çš„å·èƒ½è·‘é€šå¼€é€šyppï¼Œä¼°è®¡å°±ä¼šé‡ç‚¹æ”¾åˆ°è‡ªåŠ¨åŒ–å®ç°äººç‰©ä¸€è‡´æ€§çš„å‰§æƒ…ç”Ÿæˆè¿™å—äº†ã€‚</p>
<p>å¦å¤–å‰§æƒ…å¥½å‰ªè¾‘çš„æ—¶å€™è¦åŠ å­—å¹•ã€ç‰¹æ•ˆç­‰ç­‰ï¼Œå°±è¦ç”¨åˆ°æˆ‘ä»¬åˆšåˆšè¯´çš„å‰ªæ˜ è‡ªåŠ¨åŒ–äº†ï¼ŒåŒå±äºæŠ€æœ¯ä¸Šæ²¡éš¾åº¦ï¼Œå…³é”®æ˜¯åˆ›æ„äº†ã€‚</p>

<p>æœ¬æ¥è¿˜æ‰“ç®—åˆ†äº«ä¸‹åŒ…æ‹¬é‡‡é›†å’ŒçŸ©é˜µå‘å¸ƒçš„å…¨æµç¨‹çš„ï¼Œä½†æ˜¯å†™åˆ°è¿™å‘ç°å†…å®¹å·²ç»å¤Ÿå¤šäº†ï¼Œå¤§å®¶çœ‹çš„å¦‚æœæœ‰å¸®åŠ©çš„è¯ï¼Œæˆ‘åé¢ä¼šç»§ç»­åˆ†äº«é‡‡é›†å’Œå‘å¸ƒå’Œæ•°æ®ç»Ÿè®¡è¿™å—çš„å®ç°è¿‡ç¨‹ã€‚æ¯”å¦‚è¿‡ç™¾ä¸ªè´¦å·å¦‚ä½•ç®¡ç†ï¼Œå¤šè´¦å·å¦‚ä½•ä¸­å¿ƒåŒ–ç»Ÿè®¡æ•°æ®ï¼Œå¦‚ä½•æŸ¥çœ‹è‡ªå·±å‘å¸ƒçš„æ‰€æœ‰å†å²è§†é¢‘è§‚çœ‹é‡çš„æ—¥å¿—å®¡è®¡å’Œå¯è§†åŒ–è¶‹åŠ¿åˆ†æï¼›ä»¥åŠæˆ‘ä»¬åœ¨å¾ˆæ—©ä¹‹å‰çš„æ‰¾å¯¹æ ‡çš„é‚£ç¯‡æ–‡ç« ä¸­æˆ‘åˆ†äº«äº†ä¸€ä¸‡ä¸ªAIè§†é¢‘ç›¸å…³çš„è´¦å·ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•å°æ—¶çº§ç”šè‡³åˆ†é’Ÿçº§åˆ«ç›‘æ§é‡ç‚¹å¯¹æ ‡è´¦æˆ·çš„å‘å¸ƒæƒ…å†µå‘¢ï¼Ÿèƒ½ä¸èƒ½å¯¹æ ‡è´¦å·ä¸€å‘å¸ƒæˆ‘ä»¬åå°ç«‹åˆ»è‡ªåŠ¨åŒ–è¿›è¡Œç´ ææ‹†è§£å’Œè§†é¢‘ç”Ÿæˆï¼Ÿæˆ–è€…å¦‚ä½•æ‰¹é‡å¤åˆ»è§†é¢‘å¹¶å¾®è°ƒé£æ ¼ï¼Ÿè¿˜æœ‰æ¯”å¦‚æˆ‘ä¹‹å‰è®°å½•äº†æˆ‘æ˜¯å¦‚ä½•å¿«é€Ÿé‡‡é›†äº†ä¸€ä¸‡æ¡å¯¹æ ‡è´¦å·çš„ï¼Œä½†æ˜¯æ›´å¤§é‡çš„è§†é¢‘ç›‘æ§å’Œçƒ­ç‚¹åˆ†æå‘¢ï¼Œä¹‹å‰ä»‹ç»çš„é‡‡é›†æ–¹å¼æ•ˆç‡è¿˜æ˜¯å¤ªæ…¢äº†ï¼Œæˆ‘ä»¬å¦‚ä½•å•æœºä½æˆæœ¬åœ°å®ç°æ¯å¤©ç™¾ä¸‡ç”šè‡³åƒä¸‡çº§è§†é¢‘çš„é‡‡é›†å’Œæ•°æ®æ›´æ–°ï¼Ÿè¿™äº›å€ŸåŠ©cursoræˆ‘ä»¬éƒ½å¾ˆå®¹æ˜“å®ç°ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£åé¢æˆ‘ä»¬æ…¢æ…¢åˆ†äº«ã€‚</p>

</div>