# 153ä¸ªå…¬ä¼—å·AI KOLåä¸‡åŠ æ–‡ç« é‡‡é›†ä¸åˆ†æ

> æ¥æºï¼š[https://ia0969wpr2.feishu.cn/docx/VF9xdLsdQoTjqWxTM2PcszOqnPb](https://ia0969wpr2.feishu.cn/docx/VF9xdLsdQoTjqWxTM2PcszOqnPb)

å‰ä¸¤å¤©äº¦ä»å‘äº†ä¸€ç¯‡è¶…çº§æ ‡çš„æ–‡ç« ï¼Œæå‡ºäº†ä¸€ä¸ªAIèµ›é“çš„ä¸€ä¸ªæ–°é£å‘æ ‡ï¼Œé‚£å°±æ˜¯åšå‚ç›´ç±»çš„AIèµ„è®¯æˆ–è€…å·¥å…·ï¼Œæœ€ç»ˆæ¥å•†å•æˆ–è€…å…¶ä»–å˜ç°ã€‚

é‚£æˆ‘å°±åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½å…ˆåšä¸ªè°ƒç ”ï¼Œçœ‹ä¸‹ç°åœ¨æˆåŠŸçš„AI KOLçš„è¿ä½œæ¨¡å¼ï¼Œè¿™æ ·æˆ–è®¸å¯ä»¥æ›´å¥½åœ°æŠŠæ¡è¶…çº§æ ‡çš„æœºä¼šã€‚ä¸ºäº†æ›´æ·±å…¥åœ°ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘è¿›è¡Œäº†ä¸€æ¬¡æ•°æ®é©±åŠ¨çš„åˆ†æï¼Œå°è¯•èƒ½å¦è¿˜åŸAI KOLè‡ªåª’ä½“çš„æˆåŠŸè·¯å¾„ï¼Œä»è€Œå¸¦æ¥ä¸€äº›å‚è€ƒã€‚

ç¬¬ä¸€æ­¥æˆ‘æƒ³ç€å…ˆæ”¶é›†ç›®å‰æ‰€æœ‰å¹³å°çš„AIå…³é”®è¯çš„ä¸€æ‰‹èµ„è®¯ã€å·¥å…·ä»‹ç»ï¼Œå’Œç›®å‰çŸ¥åçš„AI KOLçš„æ‰€æœ‰å†å²æ–‡ç« å’Œä½œå“ï¼Œé¦–å…ˆæŠŠè¿™äº›éƒ½å…ˆé‡‡é›†ä¸‹æ¥åˆ†æä¸€ä¸‹ï¼Œå…¨é¢äº†è§£AIè‡ªåª’ä½“çš„ç°çŠ¶å’Œè¶‹åŠ¿ã€‚

é‚£å°±å…ˆä»å…¬ä¼—å·çš„AI KOLå¼€å§‹ï¼Œç›®å‰å®Œæˆäº†ä¸‹é¢çš„å·¥ä½œï¼š

1.  é‡‡é›†äº†153 ä¸ªå…¬ä¼—å·AIå‚ç±»æ’è¡Œæ¦œé å‰KOLçš„æ‰€æœ‰å†å²æ–‡ç« ã€‚æ€»æ•°è¶…è¿‡7ä¸‡æ¡ï¼ŒåŒ…æ‹¬åŸå§‹é“¾æ¥ã€é˜…è¯»é‡ã€ç‚¹èµæ•°ã€å‘å¸ƒæ—¶é—´ç­‰ã€‚

1.  ä½¿ç”¨AIå¯¹æ–‡ç« æ‘˜è¦åˆ†æå’Œè½¯æ–‡è¯†åˆ«ç­‰ã€‚

1.  å¯¹æ¯ä¸ªå…¬ä¼—å·ç»´åº¦è¿›è¡Œè¶‹åŠ¿åˆ†æï¼ŒåŒ…æ‹¬çˆ†å‘æ—¶é—´ç‚¹ã€é˜…è¯»é‡è¶‹åŠ¿ç­‰ã€‚æ­¤å¤–è¿˜ä½¿ç”¨Claudeåˆ¶ä½œäº†å¯è§†åŒ–å›¾è¡¨ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ¯ä¸ªå…¬ä¼—å·çš„é˜…è¯»é‡å˜åŒ–è¶‹åŠ¿å’Œçˆ†æ¬¾æ–‡ç« ï¼Œç”Ÿæˆå…¬ä¼—å·åˆ†ææŠ¥å‘Šã€‚

æ¥ä¸‹æ¥æˆ‘ä¼šåˆ†äº«åŒ…æ‹¬é‡‡é›†åˆ°çš„7ä¸‡æ¡AI KOLçš„æ‰€æœ‰åŸå§‹å…¬ä¼—å·æ–‡ç« æ•°æ®ã€Aiåˆ†ææç¤ºè¯ç­‰ç»™å¤§å®¶ï¼Œæ–¹ä¾¿å¤§å®¶ç ”ç©¶å…¬ä¼—å·AIå‚ç±»èµ›é“ï¼Œåç»­æˆ‘ä¹Ÿä¼šç»§ç»­å®æ—¶é‡‡é›†å…¨ç½‘å¦‚å°çº¢ä¹¦æŠ–éŸ³æ¨ç‰¹ç­‰çƒ­é—¨KOLçš„æ‰€æœ‰ä½œå“å¹¶æŒç»­åŒæ­¥ã€‚

æˆ‘ä»¬ä»¥å¡å…¹å…‹å…¬ä¼—å·ä¸ºä¾‹ï¼Œé¦–å…ˆæ ¹æ®é‡‡é›†åˆ°çš„æ•°æ®ç»Ÿè®¡åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘è¡¨æ–‡ç« æ•°ã€é˜…è¯»æ•°ç­‰åŸºæœ¬ä¿¡æ¯ã€ä¸åŒåˆ†ç±»çš„æ–‡ç« ç­‰ã€‚

![](img/5f842cdd71920f5872b4e694cf9e7989.png)

æˆ‘ä»¬æŒ‰ç…§æ–‡ç« é˜…è¯»æ•°æ’åºï¼Œå¯ä»¥çœ‹åˆ°å¡å…¹å…‹æ˜¯24å¹´1æœˆ10å·ä¸€ç¯‡ä»‹ç»magnificAIé¦–æ¬¡é˜…è¯»åä¸‡åŠ ï¼ŒäºŒæœˆä»½soraçš„æ–‡ç« å†æ¬¡åä¸‡åŠ ï¼Œè¿™æ¬¡å½»åº•ç ´åœˆï¼Œéšåå†æ¥ä¸‹æ¥åŠå¹´å¤šçš„æ—¶é—´å†…ï¼Œç–¯ç‹‚æ–©è·äº†11ç¯‡è¶…çº§çˆ†æ¬¾ï¼Œè¿™äº›çˆ†æ¬¾åˆ†åˆ«ä¸ºï¼š

![](img/43f37a29cfef98813fc7f0420c2c161d.png)

é€šè¿‡é˜…è¯»æ•°å’Œæ—¶é—´å˜åŒ–å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ç¬¬ä¸€ç¯‡åä¸‡åŠ å‰ï¼Œ2023å¹´12æœˆ6å·çš„ä¸€ç¯‡å…³äºpikaè¾¾åˆ°äº†å†å²æœ€é«˜ï¼Œä¸º7.8ä¸‡é˜…è¯»ï¼šã€å…¨ç½‘é¦–å‘ã€‘PIKA1.0ä¸Šæ‰‹è¯„æµ‹ï¼šhttps://mp.weixin.qq.com/s?__biz=MzIyMzA5NjEyMA%3D%3D&mid=2647660666&idx=1&sn=0e9e2a11d5c06cd512479d35ca84bf3fï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæœ€é«˜é˜…è¯»æ•°ä¸º4ä¸‡ã€‚ä¸‹é¢æ˜¯æ•´ä½“çš„è¶‹åŠ¿å›¾ï¼š

![](img/df7b3a61456167c99cd2c5663b9fb92b.png)

æ–‡ç« é˜…è¯»æ•°å’Œç¯‡æ•°åˆ†å¸ƒå›¾ï¼š

![](img/46644643223447b5370e4ce4cec67ea1.png)

ä¸‹é¢ä»¥æœˆä¸ºå•ä½å¯¹æ–‡ç« é˜…è¯»å’Œç‚¹èµæ•°è¿›è¡Œåˆ†æï¼Œå¯ä»¥çœ‹åˆ°å¡å…¹å…‹çš„æ•´ä½“æµé‡æ”€å‡å¤§æ¦‚æ˜¯åœ¨24å¹´1æœˆä»½ï¼Œè‡ªæ­¤ä»¥åå§‹ç»ˆç»´æŒåœ¨ä¸€ä¸ªé«˜ç‚¹ã€‚

![](img/f817e9b50eb5167081646bfa708bbb9c.png)

æˆ‘ä»¬æŠŠæ•°æ®ä¿¡æ¯æ‰”ç»™claudeï¼Œå¯ä»¥æ€»ç»“å¡å…¹å…‹å…¬ä¼—å·æ•´ä½“çªç ´çš„æ—¶é—´èŠ‚ç‚¹ï¼š

1.  æ—©æœŸç§¯ç´¯é˜¶æ®µï¼ˆ2023.2-2023.12.5ï¼‰ï¼šæœ€é«˜é˜…è¯»é‡ä¸º4ä¸‡ï¼ŒæŒç»­è¾“å‡ºé«˜è´¨é‡å†…å®¹ï¼Œç§¯ç´¯ç§å­ç”¨æˆ·ã€‚

1.  çˆ†å‘æœŸï¼ˆ2023.12.6-2024.2ï¼‰ï¼š

*   2023å¹´12æœˆ6æ—¥ï¼šå…³äºPikaçš„è¯„æµ‹æ–‡ç« è·å¾—7.8ä¸‡é˜…è¯»ï¼Œåˆ›ä¸‹å½“æ—¶è®°å½•ã€‚

*   2024å¹´1æœˆå’Œ2æœˆï¼šåˆ†åˆ«ä»¥magnificAIå’ŒSoraä¸ºä¸»é¢˜çš„æ–‡ç« çªç ´10ä¸‡+é˜…è¯»ï¼Œå®ç°çœŸæ­£ç ´åœˆã€‚

1.  æŒç»­é«˜äº§æœŸï¼ˆ2024.2-ï¼‰ï¼šæŒç»­è¾“å‡ºAIåº”ç”¨çš„å†…å®¹ï¼Œæ€»å…±11ç¯‡æ–‡ç« çªç ´10ä¸‡+é˜…è¯»ã€‚ä¸»é¢˜æ¶µç›–AIå·¥å…·æµ‹è¯„ã€æŠ€æœ¯çªç ´è§£è¯»ã€è¡Œä¸šåº”ç”¨æ¡ˆä¾‹ç­‰ã€‚

ä¸Šé¢æ˜¯ä½¿ç”¨AIå¯¹é‡‡é›†åˆ°çš„å…¬ä¼—å·ç»´åº¦çš„æ•°æ®åˆ†æã€‚ä¸‹é¢æ˜¯æ•´ä¸ªè¿‡ç¨‹åˆ†äº«ï¼Œæ–¹ä¾¿åŒæ ·å¯¹AIæ•°æ®åˆ†ææ„Ÿå…´è¶£çš„åŒå­¦å‚è€ƒã€‚

é¦–å…ˆæˆ‘ä»¬åœ¨æ–°æ¦œæ‰¾åˆ°äº†AI è´¦å·æ¦œå•ï¼Œåœ°å€æ˜¯ï¼šhttps://www.newrank.cn/rankai/gongzhonghaoï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°AIé¢†åŸŸæ¯”è¾ƒæœ‰åçš„å…¬ä¼—å·ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çš„å…ˆåé‡‡é›†AIæ—¥æ¦œå’Œæœˆæ¦œï¼Œåˆå¹¶å»é‡åå…±153ä¸ªè´¦å·ï¼Œæ¥ä¸‹æ¥å°±ä»¥ä¸‹é¢çš„153ä¸ªè´¦å·ä½œä¸ºå¯¹æ ‡å¯¹è±¡ï¼Œé‡‡é›†æ‰€æœ‰çš„æ–‡ç« ä¿¡æ¯ã€‚

![](img/6d1ea28392972327e73283abee0147d1.png)

æˆ‘ä»¬éœ€è¦å¯¼å‡ºæ¦œå•ï¼Œä½†æ˜¯å‘ç°åªèƒ½å¯¼å‡ºå‰20æ¡ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å½±åˆ€å¯ä»¥ä¸¤è¡Œä»£ç æå®šï¼Œé¦–å…ˆè·å–åˆ°å½“å‰æ ‡ç­¾é¡µï¼Œç„¶åé€‰æ‹©æ‰¹é‡æ•°æ®æŠ“å–ï¼Œæ•°æ®é‡‡é›†ï¼Œç›¸ä¼¼å…ƒç´ æ‹¿åˆ°æ‰€æœ‰çš„è¡¨æ ¼æ•°æ®å¹¶æ‰‹åŠ¨å¯¼å‡ºï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±æ‹¿åˆ°äº†æ‰€æœ‰çš„è¡¨æ ¼ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºå…¬ä¼—å·æ•°æ®é‡‡é›†ã€‚

![](img/8e65ee234137a205829e31e679deb19d.png)

å…·ä½“é‡‡é›†éƒ¨åˆ†å¤§å®¶å„æ˜¾ç¥é€šï¼Œè¿™é‡Œå°±ä¸å¤šä»‹ç»äº†ï¼Œç›´æ¥ä¸Šæ•°æ®ï¼Œåœ°å€ï¼š é£ä¹¦å¤šç»´è¡¨æ ¼å¯¹æ•°æ®æ¡æ•°åº”è¯¥æœ‰é™åˆ¶ï¼Œæ¡æ•°è¿‡å¤šä¸Šä¼ ä¼šå¤±è´¥ï¼Œè¿™æ˜¯åŸå§‹çš„excelï¼š

ä»¥ä¸Šæ˜¯é‡‡é›†å®Œæˆçš„å…¬ä¼—å·æ–‡ç« ï¼Œå¤§æ¦‚7ä¸‡ç¯‡å·¦å³ï¼ŒæŠŠå…¬ä¼—å·ä¸ŠAIé¢†åŸŸæ¯”è¾ƒæœ‰åçš„KOLçš„æ–‡ç« åŸºæœ¬éƒ½å·²ç»é‡‡é›†äº†ï¼Œè¿˜æœ‰ä¸€äº›åœ¨æŒç»­æ›´æ–°ã€‚æ‹¿åˆ°è¿™éƒ¨åˆ†æ•°æ®ä¹‹åæˆ‘ä»¬å°±è¦å¼€å§‹å¯è§†åŒ–åœ°åˆ†æäº†ï¼Œæ¯•ç«Ÿä¸€å¤§å¨æ•°æ®æˆ‘ä»¬æ— ä»ç€æ‰‹ï¼Œçœ‹èµ·æ¥ä¹Ÿä¸æ–¹ä¾¿ã€‚æˆ‘ä»¬ç›´æ¥é—®claude å¯ä»¥ä»å“ªäº›æ–¹é¢é’ˆå¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–å’Œå¤„ç†ã€‚

æˆ‘æ”¶é›†äº†ä¸€ç³»åˆ—å¾®ä¿¡å…¬ä¼—å·æ–‡ç« çš„å…¬å¼€æ•°æ®ï¼Œæˆ‘æƒ³å¯¹è¿™äº›æ•°æ®è¿›è¡Œæ·±å…¥åˆ†æï¼Œä»¥è¯„ä¼°è´¦å·çš„å—æ¬¢è¿æ–‡ç« ã€è´¦å·ç‰¹ç‚¹ã€éšæ—¶é—´é˜…è¯»æ•°çš„è¶‹åŠ¿å’Œæ•´ä½“å½±å“åŠ›ï¼Œä»è€Œå­¦ä¹ è´¦å·çš„å¢é•¿å’Œè¿è¥ç­–ç•¥ç­‰å¸å¼•åŒç±»ç”¨æˆ·ç¾¤ä½“ï¼Œä»å¤šç»´åº¦åˆ†æå…¬ä¼—å·çš„é˜…è¯»è¶‹åŠ¿å’Œç”¨æˆ·è¡Œä¸ºï¼Œä»è€Œè·å–æ·±åº¦æ´å¯Ÿã€‚å…·ä½“éœ€æ±‚å¦‚ä¸‹ï¼š

1.  æ•°æ®å¯è§†åŒ–ï¼š

*   åˆ›å»ºäº¤äº’å¼ä»ªè¡¨æ¿ï¼Œå±•ç¤ºå…³é”®æŒ‡æ ‡çš„æ—¶é—´åºåˆ—è¶‹åŠ¿ã€‚

*   è®¾è®¡å¤šæ ·åŒ–çš„å›¾è¡¨ç±»å‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€çƒ­åŠ›å›¾å’Œæ•£ç‚¹å›¾ã€‚

*   å®ç°æ•°æ®åˆ†å±‚å’Œé’»å–åŠŸèƒ½ï¼Œå…è®¸ä»å®è§‚è¶‹åŠ¿æ·±å…¥åˆ°å…·ä½“æ–‡ç« çº§åˆ«çš„åˆ†æã€‚

1.  å¤šç»´åº¦åˆ†æï¼š

*   é˜…è¯»é‡è¶‹åŠ¿ï¼šæŒ‰æ—¥ã€å‘¨ã€æœˆå±•ç¤ºæ–‡ç« é˜…è¯»é‡çš„å˜åŒ–ã€‚

*   äº’åŠ¨ç‡åˆ†æï¼šè®¡ç®—å¹¶å¯è§†åŒ–ç‚¹èµæ•°ã€è¯„è®ºæ•°ä¸é˜…è¯»é‡çš„æ¯”ç‡ã€‚

*   å‘å¸ƒæ—¶é—´å½±å“ï¼šåˆ†æå‘æ–‡æ—¶é—´ä¸é˜…è¯»é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚

1.  æŠ¥å‘Šç”Ÿæˆï¼š

*   è‡ªåŠ¨ç”ŸæˆåŒ…å«å…³é”®å‘ç°å’Œå»ºè®®çš„å‘¨æœŸæ€§æŠ¥å‘Šã€‚

*   æ”¯æŒè‡ªå®šä¹‰æŠ¥å‘Šæ¨¡æ¿å’Œå¯¼å‡ºåŠŸèƒ½ã€‚

æˆ‘çš„æ•°æ®åº“è¡¨ç»“æ„å¦‚ä¸‹ï¼šCREATE TABLE `wechat_articles` (

`id` int NOT NULL AUTO_INCREMENT,

`user_name` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,

`nick_name` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,

`original_article_count` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,

`original_content_str` text COLLATE utf8mb4_general_ci,

`title` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,

`digest` text COLLATE utf8mb4_general_ci,

`show_desc` text COLLATE utf8mb4_general_ci,

`item_index` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,

`url` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,

`is_original` tinyint(1) DEFAULT NULL,

`read_view` int DEFAULT NULL,

`like_count` int DEFAULT NULL,

`send_time` datetime DEFAULT NULL,

`collect_time` datetime DEFAULT NULL,

PRIMARY KEY (`id`),

UNIQUE KEY `url` (`url`)

) ENGINE=InnoDB AUTO_INCREMENT=18252 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

è¯·æä¾›ä¸€ä¸ªèƒ½å¤Ÿæ»¡è¶³ä»¥ä¸Šéœ€æ±‚çš„æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æ¨èçš„å·¥å…·ã€æŠ€æœ¯æ ˆå’Œå®ç°æ­¥éª¤ã€‚è¯·ä½ çš„å®ç°å°½å¯èƒ½ç®€å•ï¼Œç›®çš„æ˜¯å¸®æˆ‘å°½å¿«ç”Ÿæˆç›¸å…³çš„æŠ¥å‘Šã€‚

![](img/c1b9ca29b9de87a7bac57e9180035550.png)

![](img/671403ca4c24bf1bd7d6ec02689df56a.png)

cursoré¡ºåˆ©ç”Ÿæˆå¯æ‰§è¡Œçš„ä»£ç ï¼Œä½†æ˜¯æ“ä½œèµ·æ¥æ˜¯è¿˜æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿä¸€é”®è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨å¹¶å¯¼å‡ºæŠ¥å‘Š

å°½å¯èƒ½ç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ªè„šæœ¬æå®š

![](img/81d392d91931fd41494d2f8c93765b3b.png)

![](img/4cab3c7ab6e52f172891b83f30547965.png)

ç¬¬äºŒæ¬¡ç”Ÿæˆçš„ä»£ç å·²ç»å®Œæ•´åœ°å®ç°äº†éœ€æ±‚ï¼Œä½†æ˜¯cursorè¯¯æŠŠè¡¨ä¸­æ‰€æœ‰æ•°æ®å½“æˆäº†ä¸€ä¸ªå…¬ä¼—å·ï¼Œæˆ‘ä»¬é€‚å½“æé†’ä»–ï¼Œå¹¶ä¸”æ˜ç¡®ä¸€ä¸‹å…³é”®æŒ‡æ ‡é¡¹ï¼š

æˆ‘çš„æ•°æ®ä¸­æœ‰è¶…è¿‡100ä¸ªä¸åŒçš„å…¬ä¼—å·ï¼Œè¯·ä½ å¯¹æ‰€æœ‰è´¦å·è¿›è¡Œé€ä¸ªåˆ†ææœ€ç»ˆè¾“å‡ºæŠ¥å‘Šï¼Œæ¯ä¸ªç‹¬ç«‹çš„å…¬ä¼—å·éœ€è¦æœ‰å…¬ä¼—å·åç§°ï¼ˆnicknameï¼‰ã€æœ€æ—©çš„æ–‡ç« æ—¥æœŸã€æœ€æ–°çš„æ–‡ç« æ—¥æœŸã€è¯„è®ºé˜…è¯»æ•°ã€å¹³å‡ç‚¹èµæ•°ã€æ–‡ç« æ€»æ•°ã€åŸåˆ›æ•°ï¼ˆisoriginï¼‰ã€‚è¿˜è¦å¸®æˆ‘åˆ—å‡ºé˜…è¯»æ•°æœ€é«˜çš„20ç¯‡æ–‡ç« ã€ç”»å‡ºé˜…è¯»æ•°éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿å›¾ã€æ–‡ç« é˜…è¯»æ•°åˆ†å¸ƒå›¾ã€ä»¥æœˆä¸ºå•ä½çš„é˜…è¯»/ç‚¹èµæ•°è¶‹åŠ¿å›¾ã€‚

è¿™æ—¶å†æ¬¡æ‰§è¡Œï¼Œå·²ç»å®Œæ•´åœ°è¾“å‡ºäº†æ¯ä¸ªå…¬ä¼—å·çš„åˆ†ææŠ¥å‘Šï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å®Œç¾ï¼Œæˆ‘å¸Œæœ›èƒ½åˆå¹¶è¾“å‡ºä¸€ä¸ªPDFå³å¯ï¼Œæ–¹ä¾¿é˜…è¯»

![](img/6888fe0208392b0643809ef84012ea06.png)

![](img/7d50635e32b1b37997ec046ab207099e.png)

![](img/b78b333de4172e4c4c5ce6cb76548e88.png)

![](img/76cce99e47107586265ba2363217b863.png)

![](img/7ff5936a689d7da1be8a6e8c4f5f91e3.png)

è¯·ç›´æ¥ç”Ÿæˆä¸€ä¸ªæ€»çš„PDFå³å¯ï¼Œè¯·æ³¨æ„å¸®æˆ‘ç”Ÿæˆå…¬ä¼—å·ç›®å½•ï¼Œæ–¹ä¾¿æˆ‘ç›´æ¥ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”å…¬ä¼—å·

![](img/af421c6bd4c11b56f051bfbf84d14f11.png)

![](img/3a3a93b45e591a9ff635834e356e30ac.png)

![](img/0bef3a96ae8019804d248f6fb2cce570.png)

æœ€ç»ˆç”Ÿæˆçš„PDFå¦‚ä¸‹ï¼š

ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç ï¼ŒAIç”Ÿæˆå¹¶ä¸€æ¬¡é€šè¿‡ï¼š

```
import pandas as pd
import matplotlib.pyplot as plt
from sqlalchemy import create_engine
from matplotlib.backends.backend_pdf import PdfPages
import seaborn as sns
import os
import matplotlib as mpl
from reportlab.pdfgen import canvas
from reportlab.lib.pagesizes import letter
from reportlab.pdfbase import pdfmetrics
from reportlab.pdfbase.ttfonts import TTFont
from PyPDF2 import PdfMerger, PdfReader, PdfWriter
from io import BytesIO

# è®¾ç½®ä¸­æ–‡å­—ä½“
mpl.rcParams['font.sans-serif'] = ['SimHei']  # æŒ‡å®šé»˜è®¤å­—ä½“ä¸ºé»‘ä½“
mpl.rcParams['axes.unicode_minus'] = False  # è§£å†³ä¿å­˜å›¾åƒæ—¶è´Ÿå·'-'æ˜¾ç¤ºä¸ºæ–¹å—çš„é—®é¢˜

# æ³¨å†Œä¸­æ–‡å­—ä½“
pdfmetrics.registerFont(TTFont('SimHei', 'SimHei.ttf'))

# è¿æ¥æ•°æ®åº“å¹¶è¯»å–æ•°æ®
engine = create_engine('mysql+pymysql://username:password@host/wechat_article')
query = "SELECT * FROM wechat_articles"
df = pd.read_sql(query, engine)

# æ•°æ®é¢„å¤„ç†
df['send_time'] = pd.to_datetime(df['send_time'])
df['collect_time'] = pd.to_datetime(df['collect_time'])

# åˆ›å»ºè¾“å‡ºç›®å½•
output_dir = 'wechat_analysis_reports'
os.makedirs(output_dir, exist_ok=True)

# åˆ›å»ºä¸€ä¸ªPDFåˆå¹¶å™¨
merger = PdfMerger()

# åˆ›å»ºç›®å½•
toc = []

# å¯¹æ¯ä¸ªå…¬ä¼—å·è¿›è¡Œåˆ†æ
for i, nickname in enumerate(df['nick_name'].unique(), 1):
    account_df = df[df['nick_name'] == nickname]

    # åˆ›å»ºä¸´æ—¶PDFæ–‡ä»¶
    temp_pdf = BytesIO()
    with PdfPages(temp_pdf) as pdf:

        # 1\. å…¬ä¼—å·åŸºæœ¬ä¿¡æ¯
        plt.figure(figsize=(12, 6))
        info = {
            'å…¬ä¼—å·åç§°': nickname,
            'æœ€æ—©æ–‡ç« æ—¥æœŸ': account_df['send_time'].min().strftime('%Y-%m-%d'),
            'æœ€æ–°æ–‡ç« æ—¥æœŸ': account_df['send_time'].max().strftime('%Y-%m-%d'),
            'å¹³å‡é˜…è¯»æ•°': f"{account_df['read_view'].mean():.2f}",
            'å¹³å‡ç‚¹èµæ•°': f"{account_df['like_count'].mean():.2f}",
            'æ–‡ç« æ€»æ•°': len(account_df),
            'åŸåˆ›æ–‡ç« æ•°': account_df['is_original'].sum()
        }
        plt.text(0.1, 0.1, '\n'.join([f'{k}: {v}' for k, v in info.items()]), {'fontsize': 12})
        plt.axis('off')
        plt.title(f'å…¬ä¼—å·åŸºæœ¬ä¿¡æ¯ - {nickname}')
        pdf.savefig()
        plt.close()

        # 2\. é˜…è¯»æ•°æœ€é«˜çš„20ç¯‡æ–‡ç« 
        top_articles = account_df.nlargest(20, 'read_view')[['title', 'read_view', 'like_count', 'send_time']]
        plt.figure(figsize=(12, 10))
        plt.barh(top_articles['title'], top_articles['read_view'])
        plt.title(f'é˜…è¯»æ•°æœ€é«˜çš„20ç¯‡æ–‡ç«  - {nickname}')
        plt.xlabel('é˜…è¯»æ•°')
        plt.tight_layout()
        pdf.savefig()
        plt.close()

        # 3\. é˜…è¯»æ•°éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿å›¾
        plt.figure(figsize=(12, 6))
        account_df.set_index('send_time')['read_view'].plot()
        plt.title(f'é˜…è¯»æ•°éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿ - {nickname}')
        plt.ylabel('é˜…è¯»æ•°')
        pdf.savefig()
        plt.close()

        # 4\. æ–‡ç« é˜…è¯»æ•°åˆ†å¸ƒå›¾
        plt.figure(figsize=(12, 6))
        sns.histplot(account_df['read_view'], kde=True)
        plt.title(f'æ–‡ç« é˜…è¯»æ•°åˆ†å¸ƒ - {nickname}')
        plt.xlabel('é˜…è¯»æ•°')
        pdf.savefig()
        plt.close()

        # 5\. æœˆåº¦é˜…è¯»æ•°å’Œç‚¹èµæ•°è¶‹åŠ¿å›¾
        monthly_stats = account_df.set_index('send_time').resample('M').agg({
            'read_view': 'mean',
            'like_count': 'mean'
        })

        fig, ax1 = plt.subplots(figsize=(12, 6))
        ax2 = ax1.twinx()

        ax1.plot(monthly_stats.index, monthly_stats['read_view'], 'g-')
        ax2.plot(monthly_stats.index, monthly_stats['like_count'], 'b-')

        ax1.set_xlabel('æ—¥æœŸ')
        ax1.set_ylabel('å¹³å‡é˜…è¯»æ•°', color='g')
        ax2.set_ylabel('å¹³å‡ç‚¹èµæ•°', color='b')

        plt.title(f'æœˆåº¦å¹³å‡é˜…è¯»æ•°å’Œç‚¹èµæ•°è¶‹åŠ¿ - {nickname}')
        plt.tight_layout()
        pdf.savefig()
        plt.close()

    # å°†ä¸´æ—¶PDFæ·»åŠ åˆ°åˆå¹¶å™¨
    temp_pdf.seek(0)
    merger.append(temp_pdf)

    # æ·»åŠ åˆ°ç›®å½•
    toc.append((nickname, i))

    print(f"å·²ç”Ÿæˆ {nickname} çš„æŠ¥å‘Š")

# åˆ›å»ºç›®å½•é¡µ
toc_pdf = BytesIO()
c = canvas.Canvas(toc_pdf, pagesize=letter)
c.setFont("SimHei", 14)
c.drawString(100, 750, "ç›®å½•")
y = 700
for name, page in toc:
    c.setFont("SimHei", 12)
    c.drawString(100, y, f"{name}")
    c.drawString(400, y, f"{page}")
    y -= 20
    if y < 50:
        c.showPage()
        y = 750
c.save()

# å°†ç›®å½•æ·»åŠ åˆ°åˆå¹¶å™¨çš„å¼€å¤´
toc_pdf.seek(0)
merger.merge(0, toc_pdf)

# ä¿å­˜æœ€ç»ˆçš„PDF
final_pdf_path = os.path.join(output_dir, 'wechat_analysis_report.pdf')
merger.write(final_pdf_path)
merger.close()

print(f"æ€»æŠ¥å‘Šå·²ç”Ÿæˆï¼š{final_pdf_path}")
```

è™½ç„¶ç”Ÿæˆäº†æŠ¥å‘Šï¼Œä½†æ˜¯æˆ‘æƒ³ç»§ç»­ä¼˜åŒ–ç•Œé¢ç¾è§‚åº¦ï¼Œå¹¶ä¸”èƒ½å¤ŸåŠ¨æ€åˆ‡æ¢ç­‰ï¼Œè¿™æ—¶å€™å°±åªèƒ½å†™ä¸ªå‰ç«¯é¡µé¢äº†ï¼Œæˆ‘ä»¬ç»§ç»­è®©cursoræ ¹æ®éœ€æ±‚ç”Ÿæˆè§†è§‰æ•ˆæœå’Œäº¤äº’ä½“éªŒæ›´ä½³çš„é¡µé¢ã€‚

è¿™éƒ¨åˆ†å› ä¸ºcursor è¶…è¿‡äº†500æ¡é™åˆ¶ï¼Œé‡æ–°æ³¨é”€åä¸¢å¤±äº†æç¤ºè¯ï¼Œæˆ‘å°±ç›´æ¥ç²˜è´´æ‰€æœ‰ä»£ç åœ¨ä¸‹é¢äº†ï¼Œè¿™éƒ¨åˆ†å®ç°çš„æ˜¯æ•´ä½“çš„ç•Œé¢ä¼˜åŒ–ï¼Œæœ€ç»ˆå®ç°çš„å°±æ˜¯å¼€å¤´æˆªå›¾çš„æ•ˆæœï¼š

```
'use client';

import { useEffect, useState } from "react";
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, BarChart, Bar, ScatterChart, Scatter } from 'recharts';
import {  TooltipProps } from 'recharts';
import { NameType, ValueType } from 'recharts/types/component/DefaultTooltipContent';
import { useCallback } from 'react';
import WordCloud from 'react-d3-cloud';

import {WechatArticle} from "@/app/types/wechatarticle"
export default function Wechat() {

  const [selectedUsername, setSelectedUsername] = useState('gh_57bbdcde9820');
  const [isLoading, setIsLoading] = useState<boolean>(false);

  const publicAccounts = [

  ];
  interface ApiResponse {
    code: number;
    message: string;
    data: WechatAccount[];
  }
  interface WechatAccount {
    nickname: string;
    username: string;
    createTime: string;
    fetchTime: string | null;
  }
  interface WechatAnalyticsProps {
    chartData: {
      readViewTrend: Array<{ sendTime: string; readView: number }>;
      readViewDistribution: Array<{ label: string; count: number }>; // ä¿®æ”¹è¿™é‡Œ

      readLikeScatter: Array<{ readView: number; likeCount: number }>;
      monthlyStats: Array<{ month: string; avgReadView: number; avgLikeCount: number; articleCount: number }>;
    };
  }
  interface WechatAnaInfo {
    data: {
      data: {
        stats: {
          wechatNickname: string;
          earliestArticleDate: string;
          latestArticleDate: string;
          averageReadCount: number;
          averageLikeCount: number;
          totalArticles: number;
          totalOriginalArticles: number;
        };
        viralArticles: WechatArticle[];
        surgeArticles: WechatArticle[];
        topLikedArticles: WechatArticle[];
        topReadArticles: WechatArticle[];
        earliestArticles: WechatArticle[];
        latestArticles: WechatArticle[];
        aboveAverageReadArticles: WechatArticle[];
        allArticles: WechatArticle[];
        chartData: WechatAnalyticsProps['chartData'];
      };
    };
  }

const [wechatarticleInfo, setWechatarticleInfo] = useState<wechatarticle>([]);
const [wechatanaInfo, setWechatanaInfo] = useState<wechatanainfo null="">(null);
const [stats, setStats] = useState<any>(null);
const [activeTab, setActiveTab] = useState<string>("æœ€æ–°æ–‡ç« ");
const [activeAccounts, setActiveAccounts] = useState<wechataccount>([]);

const fontSizeMapper = useCallback((word: { value: number }) => Math.log2(word.value) * 5 + 16, []);

const generateWordCloudData = (articles: WechatArticle[]) => {
  const wordCount: { [key: string]: number } = {};
  articles.forEach(article => {
    const words = article.title.split(/\s+/);
    words.forEach(word => {
      if (word.length > 1) {  // å¿½ç•¥å•ä¸ªå­—ç¬¦
        wordCount[word] = (wordCount[word] || 0) + 1;
      }
    });
  });
  return Object.entries(wordCount).map(([text, value]) => ({ text, value }));
};
const getActiveAccounts = async () => {
  setIsLoading(true);
  try {
    const uri = "/api/wechat/keyword";

    const response = await fetch(uri, {
      method: "POST",
    });
    if (response.ok) {
      const result: ApiResponse = await response.json();
      if (result.code === 0 && Array.isArray(result.data)) {
        setActiveAccounts(result.data);
        if (result.data.length > 0) {
          setSelectedUsername(result.data[0].username);
        }
      } else {
        console.error("è·å–æ´»è·ƒå…¬ä¼—å·å¤±è´¥:", result.message);
        setActiveAccounts([]);
      }
    } else {
      console.error("è·å–æ´»è·ƒå…¬ä¼—å·å¤±è´¥: æœåŠ¡å™¨å“åº”é”™è¯¯");
      setActiveAccounts([]);
    }
  } catch (error) {
    console.error("è·å–æ´»è·ƒå…¬ä¼—å·å¤±è´¥:", error);
    setActiveAccounts([]);
  } finally {
    setIsLoading(false);
  }
};
 const getWechatInfo = async () => {
  try {
    const uri = "/api/wechat_info";
    const params = {
      "keyword":"username"
    };
    const resp = await fetch(uri, {
      method: "POST",
      body: JSON.stringify(params),
    });
    if (resp.ok) {
      const res = await resp.json();
      console.log("å¼€å§‹è®¾ç½®å’¯", res)
      setWechatarticleInfo(res)
    }
  } catch (e) {
    console.log("insert failed: ", e);
  }
 }

 const getWechatAna = async (username: string) => {
  setIsLoading(true);
  try {
    const uri = "/api/wechat/ana";
    const params = {
      "username": username
    };
    const resp = await fetch(uri, {
      method: "POST",
      body: JSON.stringify(params),
    });
    if (resp.ok) {
      const res = await resp.json();
      console.log("å¼€å§‹è®¾ç½®anaå’¯", res);
      setWechatanaInfo(res);
      setSelectedUsername(username);
    }
  } catch (e) {
    console.log("è·å–æ•°æ®å¤±è´¥: ", e);
  } finally {
    setIsLoading(false);
  }
}

 useEffect(() => {
  if (selectedUsername) {
    getWechatAna(selectedUsername);
  }
}, [selectedUsername]);

useEffect(() => {
  getActiveAccounts();
}, []);

  const renderStats = () => {
    if (!wechatanaInfo || !wechatanaInfo.data || !wechatanaInfo.data.data) return null;

    const { stats, viralArticles, allArticles, topLikedArticles, topReadArticles, earliestArticles, latestArticles, aboveAverageReadArticles, chartData } = wechatanaInfo.data.data;

    return (

# å…¬ä¼—å·åç§°ï¼š{stats.wechatNickname}

          æœ€æ—©æ–‡ç« æ—¥æœŸ
          {new Date(stats.earliestArticleDate).toLocaleDateString('zh-CN')}

          æœ€æ–°æ–‡ç« æ—¥æœŸ
          {new Date(stats.latestArticleDate).toLocaleDateString('zh-CN')}

          å¹³å‡é˜…è¯»æ•°
          {stats.averageReadCount}

          å¹³å‡ç‚¹èµæ•°
          {stats.averageLikeCount}

          æ–‡ç« æ€»æ•°
          {stats.totalArticles}

          åŸåˆ›æ–‡ç« æ•°
          {stats.totalOriginalArticles}

       setActiveTab("æ‰€æœ‰æ–‡ç« ")}>æ‰€æœ‰æ–‡ç« 
           setActiveTab("çˆ†æ¬¾æ–‡ç« ")}>çˆ†æ¬¾æ–‡ç« 
           setActiveTab("æœ€æ–°æ–‡ç« ")}>æœ€æ–°æ–‡ç« ğŸ”¥
           setActiveTab("é˜…è¯»æœ€é«˜")}>é˜…è¯»æœ€é«˜
           setActiveTab("ç‚¹èµæœ€é«˜")}>ç‚¹èµæœ€é«˜
           setActiveTab("æœ€æ—©æ–‡ç« ")}>æœ€æ—©æ–‡ç« 
           setActiveTab("é«˜äºå¹³å‡é˜…è¯»")}>é«˜äºå¹³å‡é˜…è¯»

        {activeTab === "æ‰€æœ‰æ–‡ç« " && renderArticleTable("æ‰€æœ‰æ–‡ç« ", allArticles)}
        {activeTab === "çˆ†æ¬¾æ–‡ç« " && renderArticleTable("çˆ†æ¬¾æ–‡ç« ", viralArticles)}
        {activeTab === "ç‚¹èµæœ€é«˜" && renderArticleTable("ç‚¹èµæœ€é«˜çš„æ–‡ç« ", topLikedArticles.slice(0, 10))}
        {activeTab === "é˜…è¯»æœ€é«˜" && renderArticleTable("é˜…è¯»æœ€é«˜çš„æ–‡ç« ", topReadArticles.slice(0, 20))}
        {activeTab === "æœ€æ—©æ–‡ç« " && renderArticleTable("æœ€æ—©å‘å¸ƒçš„æ–‡ç« ", earliestArticles.slice(0, 10))}
        {activeTab === "æœ€æ–°æ–‡ç« " && renderArticleTable("æœ€æ–°å‘å¸ƒçš„æ–‡ç« ", latestArticles.slice(0, 10))}
        {activeTab === "é«˜äºå¹³å‡é˜…è¯»" && renderArticleTable("é«˜äºå¹³å‡é˜…è¯»æ•°çš„æ–‡ç« ", aboveAverageReadArticles)}

    );
  };

  const renderArticleTable = (title: string, articles: WechatArticle[]) => {
    return (

## {title}

          {articles.map((article, index) => (

          ))}

             æ ‡é¢˜ |
               é˜…è¯»æ•° |
               ç‚¹èµæ•° |
               å‘å¸ƒæ—¶é—´ |
               é“¾æ¥ |

| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

               {article.title} |
               {article.readView} |
               {article.likeCount} |
               {new Date(article.sendTime).toLocaleDateString('zh-CN')} |
                                []({article.url}) 
               |

    );
  };

  const renderChart = () => {
    if (!wechatanaInfo || !wechatanaInfo.data || !wechatanaInfo.data.data) return null;
    const { allArticles, chartData } = wechatanaInfo.data.data;

    if (!chartData) return null;

    const wordCloudData = generateWordCloudData(allArticles);

    const CustomTooltip = ({ active, payload, label }: TooltipProps<valuetype nametype="">) => {
      if (active && payload && payload.length) {
        return (

{`é˜…è¯»æ•°èŒƒå›´: ${label}`}

{`æ–‡ç« æ•°é‡: ${payload[0].value}`}

        );
      }

      return null;
    };

    return (

        <chartsection title="é˜…è¯»æ•°éšæ—¶é—´å˜åŒ–è¶‹åŠ¿"><linechart width="{800}" height="{400}" data="{chartData.readViewTrend}"><xaxis datakey="sendTime" name="æ—¶é—´"><yaxis><cartesiangrid strokedasharray="3 3"></cartesiangrid></yaxis></xaxis></linechart></chartsection> 

        <chartsection title="æ–‡ç« é˜…è¯»æ•°åˆ†å¸ƒ"><barchart width="{800}" height="{400}" data="{chartData.readViewDistribution}"><xaxis datakey="label"><yaxis><cartesiangrid strokedasharray="3 3"><tooltip content="{<CustomTooltip">} />
          <legend><bar datakey="count" name="æ–‡ç« æ•°é‡" fill="#8884d8"></bar></legend></tooltip></cartesiangrid></yaxis></xaxis></barchart></chartsection> 

        <chartsection title="æœˆåº¦ç»Ÿè®¡"><linechart width="{800}" height="{400}" data="{chartData.monthlyStats}"><xaxis datakey="month"><yaxis yaxisid="left"><yaxis yaxisid="right" orientation="right"><cartesiangrid strokedasharray="3 3"></cartesiangrid></yaxis></yaxis></xaxis></linechart></chartsection> 

        <chartsection title="é˜…è¯»æ•°ä¸ç‚¹èµæ•°å…³ç³»"><scatterchart width="{800}" height="{400}"><xaxis datakey="readView" name="é˜…è¯»æ•°"><yaxis datakey="likeCount" name="ç‚¹èµæ•°"><tooltip cursor="{{" strokedasharray:=""><scatter name="é˜…è¯»-ç‚¹èµ" data="{chartData.readLikeScatter}" fill="#8884d8"></scatter></tooltip></yaxis></xaxis></scatterchart></chartsection> 

        {/* <chartsection title="æ–‡ç« æ ‡é¢˜è¯äº‘">

        </chartsection> */}

    );
  };
  const ChartSection = ({ title, children }: { title: string, children: React.ReactNode }) => (

## {title}

      {children}

  );
  return (

        {activeAccounts.map((account, index) => (
          setSelectedUsername(account.username)}
          >
            {account.nickname || account.username} 
        ))}

      {isLoading ? (
        åŠ è½½ä¸­...
      ) : (
        <>
          {renderStats()}
          {renderChart()}
        >
      )}

  );
}</valuetype></wechataccount></string></any></wechatanainfo></wechatarticle></boolean> 
```

Nextå®ç°çš„API

Route:

```
import { respData, respErr } from "@/app/utils/resp";

import { analyzeWechatAccount } from "@/app/models/wechatinteract";

export async function POST(req: Request) {
  const { username } = await req.json();

  const articles = await analyzeWechatAccount(username)

  return respData(articles);
}

```

APIï¼š

```
import mysql, { FieldPacket } from 'mysql2/promise';
import { WechatArticle } from '@/app/types/wechatarticle';
import { RowDataPacket } from 'mysql2';

// æ•°æ®åº“è¿æ¥é…ç½®
const dbConfig = {
  your host address
};

// è·å–æ•°æ®åº“è¿æ¥
async function getDbConnection() {
  return await mysql.createConnection(dbConfig);
}

async function getWechatArticlesByUsername(username: string): Promise {
  const conn = await getDbConnection();
  try {
    const query = `
      SELECT 
        id, user_name, nick_name, title, digest, url, 
        is_original, read_view, like_count, send_time
      FROM wechat_articles 
      WHERE user_name = ? 
      ORDER BY send_time DESC
    `;
    const [rows] = await conn.execute<rowdatapacket>(query, [username]);

    return rows.map(row => ({
      id: row.id,
      userName: row.user_name,
      nickName: row.nick_name,
      title: row.title,
      digest: row.digest,
      url: row.url,
      isOriginal: Boolean(row.is_original),
      readView: row.read_view,
      likeCount: row.like_count,
      sendTime: new Date(row.send_time)
    }));
  } finally {
    await conn.end();
  }
}

// è·å–å…¬ä¼—å·æ–‡ç« æ•°æ®

async function fetchData(userName: string): Promise <wechatarticle>{
  const conn = await getDbConnection();
  try {
    const [rows] = await conn.execute<mysql.rowdatapacket>(
      'SELECT * FROM wechat_articles WHERE user_name = ? order by send_time desc',
      [userName]
    );
    const articles = rows.map(row => ({
      id: row.id,
      userName: row.user_name,
      nickName: row.nick_name,
      title: row.title,
      digest: row.digest,
      url: row.url,
      isOriginal: Boolean(row.is_original),
      readView: row.read_view,
      likeCount: row.like_count,
      sendTime: new Date(row.send_time)
    }));

    // è®¡ç®—åŸåˆ›æ–‡ç« æ•°é‡
    const originalArticleCount = articles.filter(article => article.isOriginal).length;

    // å°†åŸåˆ›æ–‡ç« æ•°é‡æ·»åŠ åˆ°æ¯ä¸ªæ–‡ç« å¯¹è±¡ä¸­
    return articles.map(article => ({
      ...article,
      originalArticleCount
    }));
  } finally {
    await conn.end();
  }
}

// é¢„å¤„ç†æ•°æ®
function preprocessData(articles: WechatArticle[]): WechatArticle[] {
  return articles.sort((a, b) => a.sendTime.getTime() - b.sendTime.getTime());
}

// è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
function calculateStats(articles: WechatArticle[]) {
  return {
    wechatNickname: articles[0].nickName,
    earliestArticleDate: articles[0].sendTime,
    latestArticleDate: articles[articles.length - 1].sendTime,
    averageReadCount: Math.round(articles.reduce((sum, article) => sum + article.readView, 0) / articles.length),
    averageLikeCount: Math.round(articles.reduce((sum, article) => sum + article.likeCount, 0) / articles.length),
    totalArticles: articles.length,
    totalOriginalArticles: articles[0].originalArticleCount

  };
}

// åˆ†æçˆ†æ¬¾æ–‡ç« 
function analyzeViralArticles(articles: WechatArticle[]): WechatArticle[] {
  const threshold = articles.reduce((sum, article) => sum + article.readView, 0) / articles.length * 2;
  return articles
    .filter(article => article.readView > threshold)
    .sort((a, b) => b.readView - a.readView)
    .slice(0, 5);
}

// åˆ†æé˜…è¯»é‡å¢é•¿
function analyzeReadViewGrowth(articles: WechatArticle[]): WechatArticle[] {
  const growthRates = articles.map((article, index) => {
    if (index === 0) return 0;
    return (article.readView - articles[index - 1].readView) / articles[index - 1].readView;
  });

  const meanGrowth = growthRates.reduce((sum, rate) => sum + rate, 0) / growthRates.length;
  const stdDevGrowth = Math.sqrt(growthRates.reduce((sum, rate) => sum + Math.pow(rate - meanGrowth, 2), 0) / growthRates.length);
  const growthThreshold = meanGrowth + 2 * stdDevGrowth;

  return articles.filter((_, index) => growthRates[index] > growthThreshold);
}

// è·å–ç‚¹èµæœ€é«˜çš„åç¯‡æ–‡ç« 
function getTopLikedArticles(articles: WechatArticle[], limit: number = 10): WechatArticle[] {
  return [...articles].sort((a, b) => b.likeCount - a.likeCount).slice(0, limit);
}

// è·å–é˜…è¯»é‡æœ€é«˜çš„åç¯‡æ–‡ç« 
function getTopReadArticles(articles: WechatArticle[], limit: number = 20): WechatArticle[] {
  return [...articles].sort((a, b) => b.readView - a.readView).slice(0, limit);
}

// è·å–æœ€æ—©çš„åç¯‡æ–‡ç« 
function getEarliestArticles(articles: WechatArticle[], limit: number = 10): WechatArticle[] {
  return [...articles].sort((a, b) => a.sendTime.getTime() - b.sendTime.getTime()).slice(0, limit);
}

// è·å–æœ€æ–°çš„åç¯‡æ–‡ç« 
function getLatestArticles(articles: WechatArticle[], limit: number = 10): WechatArticle[] {
  return [...articles].sort((a, b) => b.sendTime.getTime() - a.sendTime.getTime()).slice(0, limit);
}

// è·å–é«˜äºå¹³å‡é˜…è¯»æ•°çš„æ‰€æœ‰æ–‡ç« 
function getAboveAverageReadArticles(articles: WechatArticle[]): WechatArticle[] {
  const averageReadCount = articles.reduce((sum, article) => sum + article.readView, 0) / articles.length;
  return articles.filter(article => article.readView > averageReadCount);
}

// æ–°å¢å‡½æ•°ç”¨äºç”Ÿæˆå›¾è¡¨æ•°æ®
function generateChartData(articles: WechatArticle[]) {
  // é˜…è¯»æ•°éšæ—¶é—´å˜åŒ–è¶‹åŠ¿
  const readViewTrend = articles.map(article => ({
    sendTime: article.sendTime.toISOString().slice(0, 10),
    readView: article.readView
  }));

   // åŠ¨æ€ç”Ÿæˆé˜…è¯»é‡åˆ†å¸ƒåŒºé—´
   function generateReadViewRanges(articles: WechatArticle[]): { min: number; max: number; label: string }[] {
    const readViews = articles.map(a => a.readView);
    const minReadView = Math.min(...readViews);
    const maxReadView = Math.max(...readViews);

    // ç¡®å®šåŸºç¡€å•ä½ï¼ˆ1000, 5000, 10000 ç­‰ï¼‰
    let baseUnit = 1000;
    if (maxReadView > 100000) baseUnit = 10000;
    else if (maxReadView > 50000) baseUnit = 5000;

    const ranges = [];
    let currentMin = 0;
    while (currentMin < maxReadView) {
      let currentMax = currentMin + baseUnit - 1;
      if (currentMax > maxReadView) currentMax = maxReadView;

      let label = `${currentMin}-${currentMax}`;
      if (currentMin === 0) label = `0-${currentMax}`;
      if (currentMax === maxReadView) label = `${currentMin}+`;

      ranges.push({ min: currentMin, max: currentMax, label });
      currentMin = currentMax + 1;

      // åŠ¨æ€è°ƒæ•´åŸºç¡€å•ä½
      if (currentMin >= baseUnit * 10) baseUnit *= 2;
    }

    return ranges;
  }

  const readViewRanges = generateReadViewRanges(articles);

  const readViewDistribution = articles.reduce((acc, article) => {
    const range = readViewRanges.find(r => article.readView >= r.min && article.readView <= r.max);
    if (range) {
      acc[range.label] = (acc[range.label] || 0) + 1;
    }
    return acc;
  }, {} as Record<string number="">);

  // é˜…è¯»æ•°ä¸ç‚¹èµæ•°å…³ç³»
  const readLikeScatter = articles.map(article => ({
    readView: article.readView,
    likeCount: article.likeCount
  }));

  // æœˆåº¦ç»Ÿè®¡
  const monthlyStats = articles.reduce((acc, article) => {
    const month = new Date(article.sendTime).toISOString().slice(0, 7);
    if (!acc[month]) {
      acc[month] = { readView: 0, likeCount: 0, count: 0 };
    }
    acc[month].readView += article.readView;
    acc[month].likeCount += article.likeCount;
    acc[month].count++;
    return acc;
  }, {} as Record<string readview:="" number="" likecount:="" count:="">);

  const monthlyStatsArray = Object.entries(monthlyStats).map(([month, stats]) => ({
    month,
    avgReadView: Math.round(stats.readView / stats.count),
    avgLikeCount: Number((stats.likeCount / stats.count).toFixed(1)),
    articleCount: stats.count
  }));

  return {
    readViewTrend,
    readViewDistribution: Object.entries(readViewDistribution).map(([label, count]) => ({ label, count })),

    readLikeScatter,
    monthlyStats: monthlyStatsArray
  };
}

// APIå‡½æ•°
async function analyzeWechatAccount(userName: string) {
  try {
    const articles = await fetchData(userName);
    const processedArticles = preprocessData(articles);

    const stats = calculateStats(processedArticles);
    const viralArticles = analyzeViralArticles(processedArticles);
    // const surgeArticles = analyzeReadViewGrowth(processedArticles);

    const topLikedArticles = getTopLikedArticles(processedArticles);
    const topReadArticles = getTopReadArticles(processedArticles);
    const earliestArticles = getEarliestArticles(processedArticles);
    const latestArticles = getLatestArticles(processedArticles);
    const aboveAverageReadArticles = getAboveAverageReadArticles(processedArticles);

     // ç”Ÿæˆå›¾è¡¨æ•°æ®
     const chartData = generateChartData(processedArticles);

    return {
      status: 'success',
      data: {
        stats,
        viralArticles: viralArticles.map(article => ({
          title: article.title,
          readView: article.readView,
          likeCount: article.likeCount,
          sendTime: article.sendTime,
          url: article.url
        })),
        topLikedArticles: topLikedArticles.map(article => ({
          title: article.title,
          readView: article.readView,
          likeCount: article.likeCount,
          sendTime: article.sendTime,
          url: article.url
        })),
        topReadArticles: topReadArticles.map(article => ({
          title: article.title,
          likeCount: article.likeCount,
          readView: article.readView,
          sendTime: article.sendTime,
          url: article.url
        })),
        earliestArticles: earliestArticles.map(article => ({
          title: article.title,
          readView: article.readView,
          likeCount: article.likeCount,
          sendTime: article.sendTime,
          url: article.url
        })),
        latestArticles: latestArticles.map(article => ({
          title: article.title,
          readView: article.readView,
          likeCount: article.likeCount,
          sendTime: article.sendTime,
          url: article.url
        })),
        aboveAverageReadArticles: aboveAverageReadArticles.map(article => ({
          title: article.title,
          readView: article.readView,
          likeCount: article.likeCount,
          sendTime: article.sendTime,
          url: article.url
        })),
        allArticles: articles.map(article => ({
          title: article.title,
          readView: article.readView,
          likeCount: article.likeCount,
          sendTime: article.sendTime,
          url: article.url
        })),
        chartData
      }
    };
  } catch (error) {
    return {
      status: 'error',
      message: error instanceof Error ? error.message : 'å‘ç”ŸæœªçŸ¥é”™è¯¯'
    };
  }
}

async function getActiveWechatAccounts(): Promise<array nickname:="" string="" null="" username:="" createtime:="" date="" fetchtime:="">> {
  const conn = await getDbConnection();
  try {
    const query = `
      SELECT nickname, username, create_time, fetch_time
      FROM wechat_keyword

      ORDER BY create_time DESC
    `;
    const [rows] = await conn.execute<rowdatapacket>(query);

    return rows.map(row => ({
      nickname: row.nickname,
      username: row.username,
      createTime: new Date(row.create_time),
      fetchTime: row.fetch_time ? new Date(row.fetch_time) : null
    }));
  } finally {
    await conn.end();
  }
}

// å¯¼å‡ºå‡½æ•°
export {
  getWechatArticlesByUsername,
  analyzeWechatAccount,
  getActiveWechatAccounts
};</rowdatapacket></array></string></string></mysql.rowdatapacket></wechatarticle></rowdatapacket> 
```

æ­£å¦‚äº¦ä»æ‰€è¨€ï¼Œç°åœ¨æ­£æ˜¯å¼€å§‹è¡ŒåŠ¨çš„æœ€ä½³æ—¶æœºã€‚å¸Œæœ›è¿™ä»½æ•°æ®åˆ†æèƒ½ä¸ºå¤§å®¶æä¾›ä¸€äº›æœ‰ä»·å€¼çš„å‚è€ƒï¼Œå¸®åŠ©å¯¹AIè‡ªåª’ä½“æ„Ÿå…´è¶£çš„åœˆå‹ã€‚